<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Sahana Agasti: agEntityEmailHelper Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>agEntityEmailHelper Class Reference</h1><!-- doxytag: class="agEntityEmailHelper" --><!-- doxytag: inherits="agEntityContactHelper" -->
<p>Provides entity email helper functions and inherits several methods and properties from the bulk record helper.  
<a href="#_details">More...</a></p>
<div class="dynheader">
Inheritance diagram for agEntityEmailHelper:</div>
<div class="dynsection">
 <div class="center">
  <img src="classagEntityEmailHelper.png" usemap="#agEntityEmailHelper_map" alt=""/>
  <map id="agEntityEmailHelper_map" name="agEntityEmailHelper_map">
<area href="classagEntityContactHelper.html" alt="agEntityContactHelper" shape="rect" coords="0,56,138,80"/>
<area href="classagBulkRecordHelper.html" alt="agBulkRecordHelper" shape="rect" coords="0,0,138,24"/>
</map>
 </div>
</div>

<p><a href="classagEntityEmailHelper-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classagEntityEmailHelper.html#a3c23139393849b90b2f49eac4ac2c573">getAgEmailHelper</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Method to lazily load the $agEmailHelper class property (an instance of <a class="el" href="classagEmailHelper.html" title="Provides bulk-email manipulation methods.">agEmailHelper</a>).  <a href="#a3c23139393849b90b2f49eac4ac2c573"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classagEntityEmailHelper.html#a19eac23aa52ff909230bc4a1561a79d0">getEntityEmailByType</a> (array $entityIds=NULL, $strType=NULL, $primary=NULL, $emailHelperMethod=NULL, array $emailArgs=array())</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Method to return entity emails for a group of entity ids, sorted from highest priority to lowest priority, and grouped by the email contact type.  <a href="#a19eac23aa52ff909230bc4a1561a79d0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classagEntityEmailHelper.html#af9805a5327335e9bdd6dd2d1ba2676fe">getEntityEmail</a> (array $entityIds=NULL, $strType=NULL, $primary=NULL, $emailHelperMethod=NULL, array $emailArgs=array())</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Method to return entity emails for a group of entity ids, sorted from highest priority to lowest priority.  <a href="#af9805a5327335e9bdd6dd2d1ba2676fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classagEntityEmailHelper.html#a37366eac7ade3f4291b3a731ea09455e">setEntityEmail</a> (array $entityContacts, $keepHistory=NULL, $enforceStrict=NULL, $throwOnError=NULL, <a class="el" href="classDoctrine__Connection.html">Doctrine_Connection</a> $conn=NULL)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Method to set entity emails by passing emails, keyed by email id.  <a href="#a37366eac7ade3f4291b3a731ea09455e"></a><br/></td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6954ce66f8bc50478226bd3352e1aa65"></a><!-- doxytag: member="agEntityEmailHelper::$agEmailHelper" ref="a6954ce66f8bc50478226bd3352e1aa65" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$agEmailHelper</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a55af9c2b74d3f6b9b4adc9b32d464d10"></a><!-- doxytag: member="agEntityEmailHelper::$defaultIsPrimary" ref="a55af9c2b74d3f6b9b4adc9b32d464d10" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$defaultIsPrimary</b> = FALSE</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a095eec1e611c281d9a6c2e2b1a01f5f3"></a><!-- doxytag: member="agEntityEmailHelper::$defaultIsStrType" ref="a095eec1e611c281d9a6c2e2b1a01f5f3" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$defaultIsStrType</b> = FALSE</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa5a636ca10635722304c54bf30cf997c"></a><!-- doxytag: member="agEntityEmailHelper::$_batchSizeModifier" ref="aa5a636ca10635722304c54bf30cf997c" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$_batchSizeModifier</b> = 2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><b>$_contactTableMetadata</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Provides entity email helper functions and inherits several methods and properties from the bulk record helper. </p>
<p>PHP Version 5.3</p>
<p>LICENSE: This source file is subject to LGPLv2.1 license that is available through the world-wide-web at the following URI: <a href="http://www.gnu.org/licenses/lgpl-2.1.html">http://www.gnu.org/licenses/lgpl-2.1.html</a></p>
<dl class="author"><dt><b>Author:</b></dt><dd>Shirley Chan, CUNY SPS</dd></dl>
<p>Copyright of the Sahana Software Foundation, sahanafoundation.org </p>

<p>Definition at line <a class="el" href="agEntityEmailHelper_8class_8php_source.html#l00016">16</a> of file <a class="el" href="agEntityEmailHelper_8class_8php_source.html">agEntityEmailHelper.class.php</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a3c23139393849b90b2f49eac4ac2c573"></a><!-- doxytag: member="agEntityEmailHelper::getAgEmailHelper" ref="a3c23139393849b90b2f49eac4ac2c573" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">agEntityEmailHelper::getAgEmailHelper </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Method to lazily load the $agEmailHelper class property (an instance of <a class="el" href="classagEmailHelper.html" title="Provides bulk-email manipulation methods.">agEmailHelper</a>). </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>object The instantiated <a class="el" href="classagEmailHelper.html" title="Provides bulk-email manipulation methods.">agEmailHelper</a> object </dd></dl>

<p>Definition at line <a class="el" href="agEntityEmailHelper_8class_8php_source.html#l00032">32</a> of file <a class="el" href="agEntityEmailHelper_8class_8php_source.html">agEntityEmailHelper.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="af9805a5327335e9bdd6dd2d1ba2676fe"></a><!-- doxytag: member="agEntityEmailHelper::getEntityEmail" ref="af9805a5327335e9bdd6dd2d1ba2676fe" args="(array $entityIds=NULL, $strType=NULL, $primary=NULL, $emailHelperMethod=NULL, array $emailArgs=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">agEntityEmailHelper::getEntityEmail </td>
          <td>(</td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>entityIds</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>strType</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>primary</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>emailHelperMethod</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>emailArgs</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Method to return entity emails for a group of entity ids, sorted from highest priority to lowest priority. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$entityIds A single dimension array of entityId's that will be queried. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$strType Boolean that determines whether or not the email contact type will be returned as an ID value or its string equivalent. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$primary Boolean that determines whether or not only the primary email will be returned (for that type). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$emailHelperMethod The email helper method that will be called to format or process the emails. This should be an agEmailHelper::EML_GET_* constant. If left NULL, only email ID's will be returned. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$emailArgs An array of arguments to pass forward to the email helper. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>array A three dimensional array, by entityId, then indexed from highest priority email to lowest, with a third dimension containing the email type as index[0], and the email value as index[1]. </dd></dl>

<p>Definition at line <a class="el" href="agEntityEmailHelper_8class_8php_source.html#l00205">205</a> of file <a class="el" href="agEntityEmailHelper_8class_8php_source.html">agEntityEmailHelper.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a19eac23aa52ff909230bc4a1561a79d0"></a><!-- doxytag: member="agEntityEmailHelper::getEntityEmailByType" ref="a19eac23aa52ff909230bc4a1561a79d0" args="(array $entityIds=NULL, $strType=NULL, $primary=NULL, $emailHelperMethod=NULL, array $emailArgs=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">agEntityEmailHelper::getEntityEmailByType </td>
          <td>(</td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>entityIds</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>strType</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>primary</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>emailHelperMethod</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>emailArgs</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Method to return entity emails for a group of entity ids, sorted from highest priority to lowest priority, and grouped by the email contact type. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$entityIds A single dimension array of entityId's that will be queried. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$strType Boolean that determines whether or not the email contact type will be returned as an ID value or its string equivalent. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$primary Boolean that determines whether or not only the primary email will be returned (for that type). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$emailHelperMethod The email helper method that will be called to format or process the emails. This should be an agEmailHelper::EML_GET_* constant. If left NULL, only email ID's will be returned. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$emailArgs An array of arguments to pass forward to the email helper. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>array A two or three dimensional array (depending on the setting of the $primary parameter), by entityId, by emailContactType. </dd></dl>

<p>Definition at line <a class="el" href="agEntityEmailHelper_8class_8php_source.html#l00093">93</a> of file <a class="el" href="agEntityEmailHelper_8class_8php_source.html">agEntityEmailHelper.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a37366eac7ade3f4291b3a731ea09455e"></a><!-- doxytag: member="agEntityEmailHelper::setEntityEmail" ref="a37366eac7ade3f4291b3a731ea09455e" args="(array $entityContacts, $keepHistory=NULL, $enforceStrict=NULL, $throwOnError=NULL, Doctrine_Connection $conn=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">agEntityEmailHelper::setEntityEmail </td>
          <td>(</td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>entityContacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>keepHistory</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>enforceStrict</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>throwOnError</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDoctrine__Connection.html">Doctrine_Connection</a> $&nbsp;</td>
          <td class="paramname"> <em>conn</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Method to set entity emails by passing emails, keyed by email id. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$entityContacts An array of entity contact information. This is similar to the output of getEntityEmail if no arguments are passed. <code> array( $entityId =&gt; array( array($emailContactTypeId, $email), ... ), ... ) </code> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$keepHistory An optional boolean value to determine whether old entity contacts (eg, those stored in the database but not explicitly passed as parameters), will be retained and reprioritized to the end of the list, or removed altogether. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$enforceStrict A boolean to determine whether or not to check for data validation. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$throwOnError A boolean to determine whether or not errors will trigger an exception or be silently ignored (rendering an email 'optional'). Defaults to the class property of the same name. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classDoctrine__Connection.html">Doctrine_Connection</a></em>&nbsp;</td><td>$conn An optional <a class="el" href="classDoctrine.html">Doctrine</a> connection object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>array An associative array of operations performed including the number of upserted records, removed records, an a positional array of failed inserts. </dd></dl>

<p>Definition at line <a class="el" href="agEntityEmailHelper_8class_8php_source.html#l00320">320</a> of file <a class="el" href="agEntityEmailHelper_8class_8php_source.html">agEntityEmailHelper.class.php</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a0f7ce6be1be9378b990b0e7b8a374f9e"></a><!-- doxytag: member="agEntityEmailHelper::$_contactTableMetadata" ref="a0f7ce6be1be9378b990b0e7b8a374f9e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">agEntityEmailHelper::$_contactTableMetadata<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> array( <span class="stringliteral">&#39;table&#39;</span> =&gt; <span class="stringliteral">&#39;agEntityEmailContact&#39;</span>,
                                            <span class="stringliteral">&#39;method&#39;</span> =&gt; <span class="stringliteral">&#39;getEntityEmail&#39;</span>,
                                            <span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;email_contact_type_id&#39;</span>,
                                            <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="stringliteral">&#39;email_contact_id&#39;</span>)
</pre></div>
<p>Definition at line <a class="el" href="agEntityEmailHelper_8class_8php_source.html#l00023">23</a> of file <a class="el" href="agEntityEmailHelper_8class_8php_source.html">agEntityEmailHelper.class.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>apps/frontend/lib/util/<a class="el" href="agEntityEmailHelper_8class_8php_source.html">agEntityEmailHelper.class.php</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>

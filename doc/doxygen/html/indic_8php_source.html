<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Sahana Agasti: web/wiki/lib/plugins/dw2pdf/mpdf/classes/indic.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>web/wiki/lib/plugins/dw2pdf/mpdf/classes/indic.php</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 
<a name="l00003"></a><a class="code" href="classindic.html">00003</a> <span class="keyword">class </span><a class="code" href="classindic.html">indic</a> {
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 function <a class="code" href="classindic.html">indic</a>() {
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 }
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 function substituteIndic($earr, $lang, $font, $useSubsets) {
<a name="l00011"></a>00011   global $voltdata;
<a name="l00012"></a>00012 
<a name="l00013"></a>00013   <span class="keywordflow">if</span> (!isset($voltdata[$font])) {
<a name="l00014"></a>00014     include_once(MPDF_FONTPATH.$font.<span class="stringliteral">&#39;.volt.php&#39;</span>);
<a name="l00015"></a>00015     $voltdata[$font] = $volt;
<a name="l00016"></a>00016   }
<a name="l00017"></a>00017 
<a name="l00018"></a>00018   <span class="comment">// These Indic fonts don&#39;t contain a-z or A-Z in Truetype files (added manually for subsets)</span>
<a name="l00019"></a>00019   <span class="comment">// Replace with ?</span>
<a name="l00020"></a>00020   <span class="keywordflow">if</span> (!$useSubsets) { 
<a name="l00021"></a>00021     <span class="keywordflow">foreach</span>($earr as $eid=&gt;$char) {
<a name="l00022"></a>00022       <span class="keywordflow">if</span> (($earr[$eid] &gt; 64 &amp;&amp; $earr[$eid] &lt; 91) || ($earr[$eid] &gt; 96 &amp;&amp; $earr[$eid] &lt; 123)) { $earr[$eid] = 63; }
<a name="l00023"></a>00023     }
<a name="l00024"></a>00024   }
<a name="l00025"></a>00025   <span class="keywordflow">foreach</span>($earr as $eid=&gt;$char) {
<a name="l00026"></a>00026     $earr[$eid] = sprintf(<span class="stringliteral">&quot;%04s&quot;</span>, strtoupper(dechex($char))); 
<a name="l00027"></a>00027   }
<a name="l00028"></a>00028   $vstr = <span class="stringliteral">&quot;0020 &quot;</span>.implode(<span class="stringliteral">&quot; &quot;</span>,$earr).<span class="stringliteral">&quot; 0020&quot;</span>;
<a name="l00029"></a>00029 
<a name="l00030"></a>00030   <span class="comment">//============================</span>
<a name="l00031"></a>00031   <span class="comment">// Common Indic Punctuation marks</span>
<a name="l00032"></a>00032   <span class="comment">// If NOT devanagari</span>
<a name="l00033"></a>00033   <span class="keywordflow">if</span> ($lang!=<span class="stringliteral">&#39;hi&#39;</span>) {
<a name="l00034"></a>00034     $vstr = preg_replace(<span class="stringliteral">&#39;/0964/&#39;</span>,<span class="stringliteral">&#39;007C&#39;</span>, $vstr); <span class="comment">// U+0964 replace with &quot;|&quot;</span>
<a name="l00035"></a>00035     $vstr = preg_replace(<span class="stringliteral">&#39;/0965/&#39;</span>,<span class="stringliteral">&#39;007C 007C&#39;</span>, $vstr);  <span class="comment">// U+0964 replace with &quot;|&quot;</span>
<a name="l00036"></a>00036   }
<a name="l00037"></a>00037   <span class="comment">//============================</span>
<a name="l00038"></a>00038   <span class="comment">// Tamil numeral for Zero missing Added mPDF 4.2</span>
<a name="l00039"></a>00039   <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;ta&#39;</span>) {
<a name="l00040"></a>00040     $vstr = preg_replace(<span class="stringliteral">&#39;/0BE6/&#39;</span>,<span class="stringliteral">&#39;0030&#39;</span>, $vstr); <span class="comment">// U+0BEB replace with &quot;0&quot;</span>
<a name="l00041"></a>00041   }
<a name="l00042"></a>00042 
<a name="l00043"></a>00043   <span class="comment">//============================</span>
<a name="l00044"></a>00044   <span class="comment">// Re-order vowels</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046   <span class="comment">// DEVANAGARI vowel sign matraI[093F] before consonant</span>
<a name="l00047"></a>00047   <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;hi&#39;</span>) {
<a name="l00048"></a>00048     $prebasedvowels = <span class="stringliteral">&quot;(093F)&quot;</span>;
<a name="l00049"></a>00049     $nukta = <span class="stringliteral">&quot;093C&quot;</span>;
<a name="l00050"></a>00050     $halant = <span class="stringliteral">&quot;094D&quot;</span>;
<a name="l00051"></a>00051     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$prebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr); <span class="comment">// vowel sign pre-based shift left</span>
<a name="l00052"></a>00052     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$prebasedvowels.<span class="charliteral">&#39; &#39;</span>.$nukta.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1 &#39;</span>.$nukta, $vstr);  <span class="comment">// before NUKTA</span>
<a name="l00053"></a>00053     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$halant.<span class="charliteral">&#39; &#39;</span>.$prebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1 &#39;</span>.$halant, $vstr);  <span class="comment">// before CHAR HALANT  ==  VIRAMA</span>
<a name="l00054"></a>00054   }
<a name="l00055"></a>00055 
<a name="l00056"></a>00056   <span class="comment">// BENGALI vowels [09BF 09C7 09C8]</span>
<a name="l00057"></a>00057   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;bn&#39;</span>) {
<a name="l00058"></a>00058     <span class="comment">// BENGALI double-part vowels [09CB 09C7 09BE][09CC 09C7 09D7]</span>
<a name="l00059"></a>00059     $vstr = preg_replace(<span class="stringliteral">&#39;/09CB/&#39;</span>,<span class="stringliteral">&#39;09C7 09BE&#39;</span>, $vstr);  <span class="comment">// convert to 2 parts</span>
<a name="l00060"></a>00060     $vstr = preg_replace(<span class="stringliteral">&#39;/09CC/&#39;</span>,<span class="stringliteral">&#39;09C7 09D7&#39;</span>, $vstr);  <span class="comment">// 09C7 pre-based is then shifted below</span>
<a name="l00061"></a>00061     $prebasedvowels = <span class="stringliteral">&quot;(09BF|09C7|09C8)&quot;</span>;
<a name="l00062"></a>00062     $nukta = <span class="stringliteral">&quot;09BC&quot;</span>;
<a name="l00063"></a>00063     $halant = <span class="stringliteral">&quot;09CD&quot;</span>;
<a name="l00064"></a>00064     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$prebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr); <span class="comment">// vowel sign pre-based shift left</span>
<a name="l00065"></a>00065     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$prebasedvowels.<span class="charliteral">&#39; &#39;</span>.$nukta.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1 &#39;</span>.$nukta, $vstr);  <span class="comment">// before NUKTA</span>
<a name="l00066"></a>00066     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$halant.<span class="charliteral">&#39; &#39;</span>.$prebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1 &#39;</span>.$halant, $vstr);  <span class="comment">// before CHAR HALANT</span>
<a name="l00067"></a>00067   }
<a name="l00068"></a>00068 
<a name="l00069"></a>00069   <span class="comment">// GUJARATI pre-based vowel [0ABF]</span>
<a name="l00070"></a>00070   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;gu&#39;</span>) {
<a name="l00071"></a>00071     $prebasedvowels = <span class="stringliteral">&quot;(0ABF)&quot;</span>;
<a name="l00072"></a>00072     $nukta = <span class="stringliteral">&quot;0ABC&quot;</span>;
<a name="l00073"></a>00073     $halant = <span class="stringliteral">&quot;0ACD&quot;</span>;
<a name="l00074"></a>00074     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$prebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr); <span class="comment">// vowel sign pre-based shift left</span>
<a name="l00075"></a>00075     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$prebasedvowels.<span class="charliteral">&#39; &#39;</span>.$nukta.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1 &#39;</span>.$nukta, $vstr);  <span class="comment">// before NUKTA</span>
<a name="l00076"></a>00076     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$halant.<span class="charliteral">&#39; &#39;</span>.$prebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1 &#39;</span>.$halant, $vstr);  <span class="comment">// before CHAR HALANT</span>
<a name="l00077"></a>00077   }
<a name="l00078"></a>00078 
<a name="l00079"></a>00079   <span class="comment">// GURMUKHI/PUNJABI pre-based vowel [0ABF]</span>
<a name="l00080"></a>00080   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;pa&#39;</span>) {
<a name="l00081"></a>00081     $prebasedvowels = <span class="stringliteral">&quot;(0A3F)&quot;</span>;
<a name="l00082"></a>00082     $nukta = <span class="stringliteral">&quot;0A3C&quot;</span>;
<a name="l00083"></a>00083     $halant = <span class="stringliteral">&quot;0A4D&quot;</span>;
<a name="l00084"></a>00084     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$prebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr); <span class="comment">// vowel sign pre-based shift left</span>
<a name="l00085"></a>00085     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$prebasedvowels.<span class="charliteral">&#39; &#39;</span>.$nukta.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1 &#39;</span>.$nukta, $vstr);  <span class="comment">// before NUKTA </span>
<a name="l00086"></a>00086     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$halant.<span class="charliteral">&#39; &#39;</span>.$prebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1 &#39;</span>.$halant, $vstr);  <span class="comment">// before CHAR HALANT</span>
<a name="l00087"></a>00087   }
<a name="l00088"></a>00088 
<a name="l00089"></a>00089   <span class="comment">// TAMIL pre-based vowel [0ABF]</span>
<a name="l00090"></a>00090   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;ta&#39;</span>) {
<a name="l00091"></a>00091     <span class="comment">// Shrii (Shree)</span>
<a name="l00092"></a>00092     $vstr = preg_replace(<span class="stringliteral">&#39;/0BB6 0BCD 0BB0 0BC0/&#39;</span>,<span class="stringliteral">&#39;E04B&#39;</span>, $vstr);
<a name="l00093"></a>00093 
<a name="l00094"></a>00094     <span class="comment">// TAMIL double-part vowels [0BCA 0BC6 0BBE][0BCB 0BC7 0BBE][0BCC 0BC6 0BD7]</span>
<a name="l00095"></a>00095     $vstr = preg_replace(<span class="stringliteral">&#39;/0BCA/&#39;</span>,<span class="stringliteral">&#39;0BC6 0BBE&#39;</span>, $vstr);  <span class="comment">// convert to 2 parts</span>
<a name="l00096"></a>00096     $vstr = preg_replace(<span class="stringliteral">&#39;/0BCB/&#39;</span>,<span class="stringliteral">&#39;0BC7 0BBE&#39;</span>, $vstr);  <span class="comment">// pre-based is then shifted below</span>
<a name="l00097"></a>00097     $vstr = preg_replace(<span class="stringliteral">&#39;/0BCC/&#39;</span>,<span class="stringliteral">&#39;0BC6 0BD7&#39;</span>, $vstr);
<a name="l00098"></a>00098     $prebasedvowels = <span class="stringliteral">&quot;(0BC6|0BC7|0BC8)&quot;</span>;
<a name="l00099"></a>00099     <span class="comment">// No nukta</span>
<a name="l00100"></a>00100     $halant = <span class="stringliteral">&quot;0BCD&quot;</span>; <span class="comment">// Doesn&#39;t seem to move most in front of halanted consonants</span>
<a name="l00101"></a>00101     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$prebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr); <span class="comment">// vowel sign pre-based shift left</span>
<a name="l00102"></a>00102     <span class="comment">// ? Only for special case KSS (already moved to left of 0BB7)</span>
<a name="l00103"></a>00103     $vstr = preg_replace(<span class="stringliteral">&#39;/0B95 &#39;</span>.$halant.<span class="charliteral">&#39; &#39;</span>.$prebasedvowels.<span class="stringliteral">&#39; 0BB7/&#39;</span>,<span class="stringliteral">&#39;\\1 0B95 &#39;</span>.$halant.<span class="stringliteral">&#39; 0BB7&#39;</span>, $vstr);
<a name="l00104"></a>00104   }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106   <span class="comment">// ORIYA</span>
<a name="l00107"></a>00107   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;or&#39;</span>) {
<a name="l00108"></a>00108     <span class="comment">// ORIYA double-part vowels []</span>
<a name="l00109"></a>00109     $vstr = preg_replace(<span class="stringliteral">&#39;/0B48/&#39;</span>,<span class="stringliteral">&#39;0B47 0B56&#39;</span>, $vstr);  <span class="comment">// 2-part Vowel</span>
<a name="l00110"></a>00110     $vstr = preg_replace(<span class="stringliteral">&#39;/0B4B/&#39;</span>,<span class="stringliteral">&#39;0B47 0B3E&#39;</span>, $vstr);  <span class="comment">// 2-part Vowel</span>
<a name="l00111"></a>00111     $vstr = preg_replace(<span class="stringliteral">&#39;/0B4C/&#39;</span>,<span class="stringliteral">&#39;0B47 0B57&#39;</span>, $vstr);  <span class="comment">// 2-part Vowel</span>
<a name="l00112"></a>00112     $orprebasedvowels = <span class="stringliteral">&quot;(0B47)&quot;</span>;
<a name="l00113"></a>00113     <span class="comment">// No nukta</span>
<a name="l00114"></a>00114     $halant = <span class="stringliteral">&quot;0B4D&quot;</span>; 
<a name="l00115"></a>00115     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$orprebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr); <span class="comment">// vowel sign pre-based shift left</span>
<a name="l00116"></a>00116     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$halant.<span class="charliteral">&#39; &#39;</span>.$orprebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1 &#39;</span>.$halant, $vstr);  <span class="comment">// before CHAR HALANT</span>
<a name="l00117"></a>00117     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$halant.<span class="charliteral">&#39; &#39;</span>.$orprebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1 &#39;</span>.$halant, $vstr);  <span class="comment">// before CHAR HALANT</span>
<a name="l00118"></a>00118   }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120   <span class="comment">// MALAYALAM</span>
<a name="l00121"></a>00121   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;ml&#39;</span>) {
<a name="l00122"></a>00122     <span class="comment">// Chillus - old forms - remove ZWNJ after</span>
<a name="l00123"></a>00123     <span class="comment">// This font Volt rules recognises e.g. &quot;Na Halant(Virama)&quot; as ChilluN </span>
<a name="l00124"></a>00124     $vstr = preg_replace(<span class="stringliteral">&#39;/(0D23 0D4D|0D28 0D4D|0D30 0D4D|0D32 0D4D|0D33 0D4D) 200D/&#39;</span>,<span class="stringliteral">&#39;\\1&#39;</span>, $vstr);
<a name="l00125"></a>00125     <span class="comment">// See Chillus in Unicode [http://en.wikipedia.org/wiki/Malayalam_script]</span>
<a name="l00126"></a>00126     $vstr = preg_replace(<span class="stringliteral">&#39;/0D7A/&#39;</span>,<span class="stringliteral">&#39;0D23 0D4D&#39;</span>, $vstr);  <span class="comment">// [mlymChilluNn] </span>
<a name="l00127"></a>00127     $vstr = preg_replace(<span class="stringliteral">&#39;/0D7B/&#39;</span>,<span class="stringliteral">&#39;0D28 0D4D&#39;</span>, $vstr);  <span class="comment">// [mlymChilluN] </span>
<a name="l00128"></a>00128     $vstr = preg_replace(<span class="stringliteral">&#39;/0D7C/&#39;</span>,<span class="stringliteral">&#39;0D30 0D4D&#39;</span>, $vstr);  <span class="comment">// [mlymChilluR] </span>
<a name="l00129"></a>00129     $vstr = preg_replace(<span class="stringliteral">&#39;/0D7D/&#39;</span>,<span class="stringliteral">&#39;0D32 0D4D&#39;</span>, $vstr);  <span class="comment">// [mlymChilluL] </span>
<a name="l00130"></a>00130     $vstr = preg_replace(<span class="stringliteral">&#39;/0D7E/&#39;</span>,<span class="stringliteral">&#39;0D33 0D4D&#39;</span>, $vstr);  <span class="comment">// [mlymChilluLl] </span>
<a name="l00131"></a>00131 <span class="comment">/*</span>
<a name="l00132"></a>00132 <span class="comment">    // Chillus - 0D7A-0D7E not in font directly, but as E005-E009</span>
<a name="l00133"></a>00133 <span class="comment">    $vstr = preg_replace(&#39;/0D23 0D4D 200D/&#39;,&#39;0D7A&#39;, $vstr);</span>
<a name="l00134"></a>00134 <span class="comment">    $vstr = preg_replace(&#39;/0D28 0D4D 200D/&#39;,&#39;0D7B&#39;, $vstr);</span>
<a name="l00135"></a>00135 <span class="comment">    $vstr = preg_replace(&#39;/0D30 0D4D 200D/&#39;,&#39;0D7C&#39;, $vstr);</span>
<a name="l00136"></a>00136 <span class="comment">    $vstr = preg_replace(&#39;/0D32 0D4D 200D/&#39;,&#39;0D7D&#39;, $vstr);</span>
<a name="l00137"></a>00137 <span class="comment">    $vstr = preg_replace(&#39;/0D33 0D4D 200D/&#39;,&#39;0D7E&#39;, $vstr);</span>
<a name="l00138"></a>00138 <span class="comment"></span>
<a name="l00139"></a>00139 <span class="comment">    $vstr = preg_replace(&#39;/0D7F/&#39;,&#39;E004&#39;, $vstr); // [mlymChilluK] </span>
<a name="l00140"></a>00140 <span class="comment">    $vstr = preg_replace(&#39;/0D7A/&#39;,&#39;E005&#39;, $vstr); // [mlymChilluNn] </span>
<a name="l00141"></a>00141 <span class="comment">    $vstr = preg_replace(&#39;/0D7B/&#39;,&#39;E006&#39;, $vstr); // [mlymChilluN] </span>
<a name="l00142"></a>00142 <span class="comment">    $vstr = preg_replace(&#39;/0D7C/&#39;,&#39;E007&#39;, $vstr); // [mlymChilluR] </span>
<a name="l00143"></a>00143 <span class="comment">    $vstr = preg_replace(&#39;/0D7D/&#39;,&#39;E008&#39;, $vstr); // [mlymChilluL] </span>
<a name="l00144"></a>00144 <span class="comment">    $vstr = preg_replace(&#39;/0D7E/&#39;,&#39;E009&#39;, $vstr); // [mlymChilluLl] </span>
<a name="l00145"></a>00145 <span class="comment">*/</span>
<a name="l00146"></a>00146 
<a name="l00147"></a>00147     <span class="comment">// MALAYALAM double-part vowels []</span>
<a name="l00148"></a>00148     $vstr = preg_replace(<span class="stringliteral">&#39;/0D4A/&#39;</span>,<span class="stringliteral">&#39;0D46 0D3E&#39;</span>, $vstr);  <span class="comment">// 2-part Vowel</span>
<a name="l00149"></a>00149     $vstr = preg_replace(<span class="stringliteral">&#39;/0D4B/&#39;</span>,<span class="stringliteral">&#39;0D47 0D3E&#39;</span>, $vstr);  <span class="comment">// 2-part Vowel</span>
<a name="l00150"></a>00150     $vstr = preg_replace(<span class="stringliteral">&#39;/0D4C/&#39;</span>,<span class="stringliteral">&#39;0D46 0D57&#39;</span>, $vstr);  <span class="comment">// 2-part Vowel</span>
<a name="l00151"></a>00151     $mlprebasedvowels = <span class="stringliteral">&quot;(0D46|0D47|0D48)&quot;</span>;
<a name="l00152"></a>00152     <span class="comment">// No nukta</span>
<a name="l00153"></a>00153     $halant = <span class="stringliteral">&quot;0D4D&quot;</span>; 
<a name="l00154"></a>00154     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$mlprebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr); <span class="comment">// vowel sign pre-based shift left</span>
<a name="l00155"></a>00155     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$halant.<span class="charliteral">&#39; &#39;</span>.$mlprebasedvowels.<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\2 \\1 &#39;</span>.$halant, $vstr);  <span class="comment">// before CHAR HALANT</span>
<a name="l00156"></a>00156   }
<a name="l00157"></a>00157 
<a name="l00158"></a>00158   <span class="comment">// TELUGU </span>
<a name="l00159"></a>00159   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;te&#39;</span>) {
<a name="l00160"></a>00160     <span class="comment">// TELUGU double-part vowels [0C48 -&gt; 0C46 0C56]</span>
<a name="l00161"></a>00161     $vstr = preg_replace(<span class="stringliteral">&#39;/0C48/&#39;</span>,<span class="stringliteral">&#39;0C46 0C56&#39;</span>, $vstr);  <span class="comment">// 2-part Vowel </span>
<a name="l00162"></a>00162     $prebasedvowels = <span class="stringliteral">&quot;(0C46)&quot;</span>;
<a name="l00163"></a>00163     $abvvowels = <span class="stringliteral">&quot;(0C3E|0C3F|0C40|0C46|0C47|0C4A|0C4B|0C4C|0C55)&quot;</span>;
<a name="l00164"></a>00164     <span class="comment">// No nukta</span>
<a name="l00165"></a>00165     $halant = <span class="stringliteral">&quot;0C4D&quot;</span>; 
<a name="l00166"></a>00166     $tefullforms = <span class="stringliteral">&quot;0C15|0C17|0C18|0C1A|0C1B|0C1C|0C1D|0C20|0C21|0C22|0C24|0C25|0C26|0C27|0C28|0C2A|0C2B|0C2D|0C2E|0C2F|0C30|0C33|0C35|0C36|0C37|0C38|0C39|E028|E029|E02A|E02B|E078|E07A|E07B&quot;</span>;
<a name="l00167"></a>00167     $vstr = preg_replace(<span class="stringliteral">&#39;/(&#39;</span>.$tefullforms .<span class="stringliteral">&#39;) &#39;</span>.$halant.<span class="stringliteral">&#39; (&#39;</span>.$tefullforms .<span class="stringliteral">&#39;) &#39;</span>.$abvvowels .<span class="charliteral">&#39;/&#39;</span>,<span class="stringliteral">&#39;\\1 \\3 &#39;</span>.$halant.<span class="stringliteral">&#39; \\2&#39;</span>, $vstr); <span class="comment">// before HALANT</span>
<a name="l00168"></a>00168   }
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <span class="comment">// KANNADA</span>
<a name="l00172"></a>00172   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;kn&#39;</span>) {
<a name="l00173"></a>00173     <span class="comment">// KANNADA double-part vowels [0CC8 -&gt; 0CC6 0CD6]</span>
<a name="l00174"></a>00174     $vstr = preg_replace(<span class="stringliteral">&#39;/0CC0/&#39;</span>,<span class="stringliteral">&#39;0CBF 0CD5&#39;</span>, $vstr);  <span class="comment">// 2-part Vowel </span>
<a name="l00175"></a>00175     $vstr = preg_replace(<span class="stringliteral">&#39;/0CC7/&#39;</span>,<span class="stringliteral">&#39;0CC6 0CD5&#39;</span>, $vstr);  <span class="comment">// 2-part Vowel </span>
<a name="l00176"></a>00176     $vstr = preg_replace(<span class="stringliteral">&#39;/0CC8/&#39;</span>,<span class="stringliteral">&#39;0CC6 0CD6&#39;</span>, $vstr);  <span class="comment">// 2-part Vowel AI - no glyph for single</span>
<a name="l00177"></a>00177     $vstr = preg_replace(<span class="stringliteral">&#39;/0CCA/&#39;</span>,<span class="stringliteral">&#39;0CC6 0CC2&#39;</span>, $vstr);  <span class="comment">// 2-part Vowel </span>
<a name="l00178"></a>00178     $vstr = preg_replace(<span class="stringliteral">&#39;/0CCB/&#39;</span>,<span class="stringliteral">&#39;0CC6 0CC2 0CD5&#39;</span>, $vstr); <span class="comment">// 2-part Vowel </span>
<a name="l00179"></a>00179     $prebasedvowels = <span class="stringliteral">&quot;(0CBF|0CC6)&quot;</span>;
<a name="l00180"></a>00180     $halant = <span class="stringliteral">&quot;0CCD&quot;</span>; 
<a name="l00181"></a>00181   }
<a name="l00182"></a>00182 
<a name="l00183"></a>00183 
<a name="l00184"></a>00184   <span class="comment">//============================</span>
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="comment">// SPECIALS</span>
<a name="l00187"></a>00187 
<a name="l00188"></a>00188   <span class="comment">// DEVANAGARI Ra Halant Ra</span>
<a name="l00189"></a>00189   <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;hi&#39;</span>) {
<a name="l00190"></a>00190     $vstr = preg_replace(<span class="stringliteral">&#39;/0930 094D 0930/&#39;</span>,<span class="stringliteral">&#39;E05D 0930&#39;</span>, $vstr);  <span class="comment">// Ra Halant Ra =&gt; halfRa FullRa</span>
<a name="l00191"></a>00191   }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193   <span class="comment">// GUJARATI</span>
<a name="l00194"></a>00194   <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;gu&#39;</span>) {
<a name="l00195"></a>00195     $vstr = preg_replace(<span class="stringliteral">&#39;/0AB0 0AC2/&#39;</span>,<span class="stringliteral">&#39;E02E&#39;</span>, $vstr);  <span class="comment">// Ra VowelUu =&gt; SpecialForm RaUu</span>
<a name="l00196"></a>00196   }
<a name="l00197"></a>00197 
<a name="l00198"></a>00198   <span class="comment">// TELUGU Ra Halant &lt;Consonant&gt; Halant =&gt; halfRa Halant&lt;Consonant&gt; Halant </span>
<a name="l00199"></a>00199   <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;te&#39;</span>) {
<a name="l00200"></a>00200     $vstr = preg_replace(<span class="stringliteral">&#39;/0C30 0C4D ([A-F0-9]{4}) 0C4D/&#39;</span>,<span class="stringliteral">&#39;E021 0C4D \\1 0C4D&#39;</span>, $vstr); 
<a name="l00201"></a>00201   }
<a name="l00202"></a>00202 
<a name="l00203"></a>00203   <span class="comment">//============================</span>
<a name="l00204"></a>00204   <span class="comment">// MAIN BIT FROM VOLT RULES</span>
<a name="l00205"></a>00205   <span class="keywordflow">foreach</span>($voltdata[$font] AS $rid=&gt;$reps) {
<a name="l00206"></a>00206 <span class="comment">//echo $vstr.&#39;&lt;br /&gt;&#39;;</span>
<a name="l00207"></a>00207     $vstr = preg_replace(<span class="charliteral">&#39;/&#39;</span>.$reps[<span class="stringliteral">&#39;match&#39;</span>].<span class="charliteral">&#39;/&#39;</span>,$reps[<span class="stringliteral">&#39;replace&#39;</span>], $vstr);
<a name="l00208"></a>00208   } 
<a name="l00209"></a>00209 <span class="comment">//echo $vstr.&#39;&lt;br /&gt;&#39;; exit;</span>
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 
<a name="l00212"></a>00212   <span class="comment">//============================</span>
<a name="l00213"></a>00213 
<a name="l00214"></a>00214   <span class="comment">// SPECIALS</span>
<a name="l00215"></a>00215 
<a name="l00216"></a>00216   <span class="comment">// KANNADA </span>
<a name="l00217"></a>00217   <span class="comment">// &lt;Base&gt; &lt;BelowBase1&gt; [&lt;BelowBase2&gt; ] MatraI -&gt; &lt;Base/MatraI ligature&gt; &lt;Belowbase1&gt; etc</span>
<a name="l00218"></a>00218   <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;kn&#39;</span>) {
<a name="l00219"></a>00219     $matraI = <span class="stringliteral">&quot;0CBF&quot;</span>;
<a name="l00220"></a>00220     $knbase = preg_split(<span class="stringliteral">&#39;/\|/&#39;</span>, <span class="stringliteral">&quot;0C95|0C96|0C97|0C98|0C9A|0C9B|0C9C|0C9D|0CA0|0CA1|0CA2|0CA3|0CA4|0CA5|0CA6|0CA7|0CA8|0CAA|0CAB|0CAC|0CAD|0CAE|0CAF|0CB0|0CB2|0CB3|0CB5|0CB6|0CB7|0CB8|0CB9|E0A3|E07D|E07E&quot;</span>);
<a name="l00221"></a>00221     $knmatraIligature = preg_split(<span class="stringliteral">&#39;/\|/&#39;</span>, <span class="stringliteral">&quot;E082|E083|E084|E085|E086|E087|E088|E089|E08A|E08B|E08C|E08D|E08E|E08F|E090|E091|E092|E093|E094|E095|E096|E097|E098|E099|E09A|E09B|E09C|E09D|E09E|E09F|E0A0|E0A4|E0A1|E0A2&quot;</span>);
<a name="l00222"></a>00222     $belowbase1 = <span class="stringliteral">&quot;E02E|E02F|E030|E031|E032|E033|E034|E035|E036|E037|E038|E039|E03A|E03B|E03C|E03D|E03E|E03F|E040|E041|E042|E043|E044|E045|E046|E047|E048|E049|E04A|E04B|E04C|E04D|E04E|E04F|E050|E081&quot;</span>;
<a name="l00223"></a>00223     $belowbase2 = <span class="stringliteral">&quot;E052|E053|E054|E055|E056|E057|E058|E059|E05A|E05B|E05C|E05D|E05E|E05F|E060|E061|E062|E063|E064|E065|E066|E067|E068|E069|E06A|E06B|E06C|E06D|E06E|E06F|E070|E071|E072|E073|E074|E081&quot;</span>;
<a name="l00224"></a>00224     <span class="keywordflow">for</span> ($i=0; $i&lt;count($knbase);$i++) {
<a name="l00225"></a>00225       $vstr = preg_replace(<span class="charliteral">&#39;/&#39;</span>.$knbase[$i].<span class="stringliteral">&#39; (&#39;</span>.$belowbase1.<span class="stringliteral">&#39;) (&#39;</span>.$belowbase2.<span class="stringliteral">&#39;) &#39;</span>.$matraI.<span class="charliteral">&#39;/&#39;</span>, $knmatraIligature[$i].<span class="stringliteral">&#39; \\1 \\2&#39;</span>, $vstr);
<a name="l00226"></a>00226       $vstr = preg_replace(<span class="charliteral">&#39;/&#39;</span>.$knbase[$i].<span class="stringliteral">&#39; (&#39;</span>.$belowbase1.<span class="stringliteral">&#39;) &#39;</span>.$matraI.<span class="charliteral">&#39;/&#39;</span>, $knmatraIligature[$i].<span class="stringliteral">&#39; \\1&#39;</span>, $vstr);
<a name="l00227"></a>00227     }
<a name="l00228"></a>00228   }
<a name="l00229"></a>00229 
<a name="l00230"></a>00230   <span class="comment">// KANNADA </span>
<a name="l00231"></a>00231   <span class="comment">// [KanTtaFull] [matraI] =&gt; [KanTtaPartial] [matraI] </span>
<a name="l00232"></a>00232   <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;kn&#39;</span>) {
<a name="l00233"></a>00233     $vstr = preg_replace(<span class="stringliteral">&#39;/0C9F &#39;</span>.$matraI.<span class="charliteral">&#39;/&#39;</span>, <span class="stringliteral">&#39;E015 &#39;</span>.$matraI, $vstr);
<a name="l00234"></a>00234   }
<a name="l00235"></a>00235 
<a name="l00236"></a>00236   <span class="comment">// ORIYA </span>
<a name="l00237"></a>00237   <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;or&#39;</span>) {
<a name="l00238"></a>00238     <span class="comment">// SpecialCase Ra[0B30] Halant still left before [oryaFullNnNna] =&gt; E00F</span>
<a name="l00239"></a>00239     $vstr = preg_replace(<span class="stringliteral">&#39;/0B30 &#39;</span>.$halant.<span class="stringliteral">&#39; E00F/&#39;</span>,<span class="stringliteral">&#39;E00F E069&#39;</span>, $vstr); <span class="comment">// convert to Reph</span>
<a name="l00240"></a>00240   }
<a name="l00241"></a>00241 
<a name="l00242"></a>00242   <span class="comment">//============================</span>
<a name="l00243"></a>00243   <span class="comment">// SHIFT REPH</span>
<a name="l00244"></a>00244 
<a name="l00245"></a>00245   <span class="comment">// DEVANAGARI Shift Reph [E015]</span>
<a name="l00246"></a>00246   <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;hi&#39;</span>) {
<a name="l00247"></a>00247     <span class="comment">// FIRSTLY - halfRa = E05D - Change this to Reph [E015]</span>
<a name="l00248"></a>00248     $himatchhalfforms = <span class="stringliteral">&quot;E043|E044|E045|E046|E047|E048|E049|E04A|E04B|E04C|E04D|E04E|E04F|E050|E051|E052|E053|E054|E055|E056|E057|E058|E059|E05A|E05B|E05C|E05D|E05E|E05F|E060|E061|E062|E063|E064|E065|E066|E067|E068|E069|E06A|E06B|E06C|E06D|E06E|E06F|E070|E071|E072|E073|E074|E075|E076|E077|E078|E079|E07A|E07B|E07C|E07D|E07E|E07F|E080|E081|E082|E083|E084|E085|E086|E087|E088|E089|E08A|E0D3|E0D4|E0D5|E0D6|E0D7|E0D8|E0D9|E0DA|E0DB|E0DC|E0DD|E0DE|E0DF|E0E0|E0E1|E0E2|E0E3|E0E4|E0E5|E0E6|E0E7|E0E8|E0E9|E0EA|E0EB|E0EC|E0ED|E0EE|E0EF|E0F0|E0F1|E0F2|E0F3|E0F4|E0F5|E0F6|E0F7|E0F8|E0F9|E0FA|E0FB|E0FC|E0FD|E0FE|E0FF|E100|E101|E102|E103|E104|E105|E106|E107|E108|E109|E10A|E10B|E10C|E10D|E10E|E10F|E110|E111|E112|E113|E114|E115|E116|E117|E118|E119|E11A|E13D|E13E|E13F|E140|E141|E142|E143|E144|E145&quot;</span>;
<a name="l00249"></a>00249     $himatchfullforms = <span class="stringliteral">&quot;0915|0916|0917|0918|0919|091A|091B|091C|091D|091E|091F|0920|0921|0922|0923|0924|0925|0926|0927|0928|092A|092B|092C|092D|092E|092F|0930|0932|0933|0935|0936|0937|0938|0939|E028|E029|0958|0959|095A|E02A|E02B|E02C|E02D|095B|E02E|E02F|E030|E031|095C|095D|E032|E033|E034|E035|E036|0929|E037|095E|E038|E039|E03A|095F|0931|E03B|0934|E03C|E03D|E03E|E03F|E040|E041|E042|E08B|E08C|E08D|E08E|E08F|E090|E091|E092|E093|E094|E095|E096|E097|E098|E099|E09A|E09B|E09C|E09D|E09E|E09F|E0A0|E0A1|E0A2|E0A3|E0A4|E0A5|E0A6|E0A7|E0A8|E0A9|E0AA|E0AB|E0AC|E0AD|E0AE|E0AF|E0B0|E0B1|E0B2|E0B3|E0B4|E0B5|E0B6|E0B7|E0B8|E0B9|E0BA|E0BB|E0BC|E0BD|E0BE|E0BF|E0C0|E0C1|E0C2|E0C3|E0C4|E0C5|E0C6|E0C7|E0C8|E0C9|E0CA|E0CB|E0CC|E0CD|E0CE|E0CF|E0D0|E0D1|E0D2|E11E|E11F|E120|E121|E122|E123|E124|E125|E126|E127|E128|E129|E12A|E12B|E12C|E12D|E12E|E12F|E130|E131|E132|E133&quot;</span>;
<a name="l00250"></a>00250     $vstr = preg_replace(<span class="stringliteral">&#39;/E05D (&#39;</span>.$himatchhalfforms.<span class="charliteral">&#39;|&#39;</span>.$himatchfullforms.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;E015 \\1&#39;</span>, $vstr);
<a name="l00251"></a>00251 
<a name="l00252"></a>00252     <span class="comment">// Reph = E015 - Shift Right to just after end of syllable</span>
<a name="l00253"></a>00253     <span class="comment">// FullAllForms + HalfAllForms + 093E matraA</span>
<a name="l00254"></a>00254     <span class="keywordflow">while</span>(preg_match(<span class="stringliteral">&#39;/E015 (&#39;</span>.$himatchhalfforms.<span class="stringliteral">&#39;)/&#39;</span>, $vstr)) {
<a name="l00255"></a>00255       $vstr = preg_replace(<span class="stringliteral">&#39;/E015 (&#39;</span>.$himatchhalfforms.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;\\1 E015&#39;</span>, $vstr);
<a name="l00256"></a>00256     }
<a name="l00257"></a>00257     $vstr = preg_replace(<span class="stringliteral">&#39;/E015 (&#39;</span>.$himatchfullforms.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;\\1 E015&#39;</span>, $vstr);
<a name="l00258"></a>00258 
<a name="l00259"></a>00259     <span class="comment">// Now shift it beyond post-based vowels  // ??? Need to add others e.g. 0949,094A,094B,094C + presentation forms like E198</span>
<a name="l00260"></a>00260     $vstr = preg_replace(<span class="stringliteral">&#39;/E015 093E/&#39;</span>, <span class="stringliteral">&#39;093E E015&#39;</span>, $vstr);
<a name="l00261"></a>00261     $vstr = preg_replace(<span class="stringliteral">&#39;/E015 (0940|E194|E195|E196|E197|E198)/&#39;</span>, <span class="stringliteral">&#39;\\1 E014&#39;</span>, $vstr);  <span class="comment">// (Small) reph [E014] to Right of matraI</span>
<a name="l00262"></a>00262     $vstr = preg_replace(<span class="stringliteral">&#39;/E015 0947/&#39;</span>, <span class="stringliteral">&#39;0947 E014&#39;</span>, $vstr);  <span class="comment">// (Small) reph [E014] to Right of matraI</span>
<a name="l00263"></a>00263   }
<a name="l00264"></a>00264 
<a name="l00265"></a>00265   <span class="comment">// BENGALI Shift Reph [E068]</span>
<a name="l00266"></a>00266   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;bn&#39;</span>) {
<a name="l00267"></a>00267     $bnfullconjuncts = <span class="stringliteral">&quot;E002|E003|E004|E041|E042|E043|E044|E045|E046|E047|E048|E049|E04A|E04B|E04C|E04D|E04E|E04F|E050|E051|E052|E053|E054|E055|E056|E057|E058|E059|E05A|E05B|E05C|E05D|E05E|E05F|E060|E061|E062|E063|E064|E065|E06A|E06B|E06C|E06D|E06E|E06F|E070|E071|E072|E073|E074|E075|E076|E077|E078|E079|E07A|E07B|E07C|E07D|E07E|E07F|E080|E081|E082|E083|E084|E085|E086|E087|E088|E089|E08A|E08B|E08C|E08D|E08E|E08F|E090|E091|E092|E093|E094|E095|E096|E097|E098|E099|E09A|E09B|E09C|E09D|E09E|E09F|E0A0|E0A1|E0A2|E0A3|E0A4|E0A5|E0A6|E0A7|E0A8|E0A9|E0AA|E0AB|E0AC|E0AD|E0AE|E0AF|E0B0|E0B1|E0B2|E0B3|E0B4|E0B5|E0B6|E0B7|E0B8|E0B9|E0BA|E0BB|E0BC|E0BD|E0BE|E0BF|E0C0|E0C1|E0C2|E0C3|E0C4|E0C5|E0C6|E0C7|E0C8|E0C9|E0CA|E0CB|E0CC|E0CD|E0CE|E0CF|E0D0|E0D1|E0D2|E0D3|E0D4|E0D5|E0D6|E0D7|E0D8|E0D9|E0DA|E0DB|E0DC|E0DD|E0DE|E0DF|E0E0|E0E1|E0E2|E0E3|E0E4|E0E5|E0E6|E0E7|E0E8|E0E9|E0EA|E0EB|E0EC|E0ED|E0EE|E0EF|E0F0|E0F1|E0F2|E0F3|E0F4|E0F5|E0F6|E0F7|E0F8|E0F9|E0FA|E0FB|E0FC|E0FD|E0FE|E0FF|E100|E101|E102|E103|E104|E105|E106|E107|E108|E109|E10A|E10B|E10C|E10D|E10E|E10F|E110|E111|E112|E113|E114|E115|E116|E117|E118|E119|E11A|E11B|E11C|E11D|E11E|E11F|E120|E121|E122|E123|E124|E125|E126|E127|E128|E129|E12A|E12B|E12C|E12D|E12E|E12F|E130|E131|E132|E133|E134|E135|E136|E137|E138|E139|E13A|E13B|E13C|E13D|E13E|E13F|E140|E141|E142|E143|E144|E145|E146|E147|E148|E149|E14A|E14B|E14C|E14D|E14E|E14F|E150|E151|E152|E153|E154|E155|E156|E157|E158|E159|E15A|E15B|E15C|E15D|E15E|E15F|E160|E161|E162|E163|E164|E165|E166|E167|E168|E169|E16A|E16B|E16C|E16D|E16E|E16F|E170|E171|E172|E173|E174|E175|E176|E177|E178|E179|E17A|E17B|E17C|E17D|E17E|E17F|E180|E181|E182|E183|E184|E185|E186|E187|E188|E189|E18A|E18B|E18C|E18D|E18E|E18F|E190|E191|E192|E193|E194|E195|E196|E197|E198|E199|E19A&quot;</span>;
<a name="l00268"></a>00268     $bnfullcons = <span class="stringliteral">&quot;0995|0996|0997|0998|0999|099A|099B|099C|099D|099F|09A0|09A1|09A2|09A3|09A4|09A5|09A6|09A7|09A8|09AA|09AB|09AC|09AD|09AE|09AF|09B0|09B2|09B6|09B7|09B8|09B9|09DC|09DD|09DF&quot;</span>;
<a name="l00269"></a>00269     $vstr = preg_replace(<span class="stringliteral">&#39;/E068 (&#39;</span>.$bnfullconjuncts.<span class="charliteral">&#39;|&#39;</span>.$bnfullcons.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;\\1 E068&#39;</span>, $vstr);
<a name="l00270"></a>00270     <span class="comment">// ? Need to shift it beyond post-base vowels 09BE, 09C0, 09D7  haven&#39;t found so can&#39;t test??</span>
<a name="l00271"></a>00271     $vstr = preg_replace(<span class="stringliteral">&#39;/E068 (09BE|09C0|09D7)/&#39;</span>, <span class="stringliteral">&#39;\\1 E068&#39;</span>, $vstr);
<a name="l00272"></a>00272   }
<a name="l00273"></a>00273 
<a name="l00274"></a>00274   <span class="comment">// GUJARATI Shift Reph [E032]</span>
<a name="l00275"></a>00275   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;gu&#39;</span>) {
<a name="l00276"></a>00276     $gufullforms = <span class="stringliteral">&quot;0A95|0A96|0A97|0A98|0A99|0A9A|0A9B|0A9C|0A9D|0A9E|0A9F|0AA0|0AA1|0AA2|0AA3|0AA4|0AA5|0AA6|0AA7|0AA8|0AAA|0AAB|0AAC|0AAD|0AAE|0AAF|0AB0|0AB2|0AB3|0AB5|0AB6|0AB7|0AB8|0AB9|E002|E003|E004|E005|E006|E007|E008|E009|E00A|E00B|E00C|E00D|E00E|E00F|E010|E011|E012|E013|E014|E015|E016|E017|E018|E019|E01A|E01B|E01C|E01D|E01E|E01F|E020|E021|E022|E023|E024|E025|E026|E027|E05E|E05F|E060|E061|E062|E063|E064|E065|E066|E067|E068|E069|E06A|E06B|E06C|E06D|E06E|E06F|E070|E071|E072|E073|E074|E075|E076|E077|E078|E079|E07A|E07B|E07C|E07D|E07E|E07F|E080|E081|E082|E083|E084|E085|E086|E087|E088|E089|E08A|E08B|E08C|E08D|E08E|E08F|E090|E091|E092|E093|E094|E095|E096|E097|E098|E099|E09A|E09B|E09C|E09D|E09E|E09F|E0A0|E0A1|E0A2|E0A3|E0A4|E0A5&quot;</span>;
<a name="l00277"></a>00277     $vstr = preg_replace(<span class="stringliteral">&#39;/E032 (&#39;</span>.$gufullforms.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;\\1 E032&#39;</span>, $vstr);
<a name="l00278"></a>00278     <span class="comment">// Now shift it beyond post-based vowels  // ??? Need to add others e.g. 0949,094A,094B,094C + presentation forms like E198</span>
<a name="l00279"></a>00279     <span class="comment">// ? Need to shift it beyond post-base vowels 0ABE, 0AC0 haven&#39;t found so can&#39;t test??</span>
<a name="l00280"></a>00280     $vstr = preg_replace(<span class="stringliteral">&#39;/E032 (0ABE|0AC0)/&#39;</span>, <span class="stringliteral">&#39;\\1 E032&#39;</span>, $vstr);
<a name="l00281"></a>00281   }
<a name="l00282"></a>00282 
<a name="l00283"></a>00283 
<a name="l00284"></a>00284   <span class="comment">// TELUGU Shift Reph to LEFT [E046|E069|E077]    [TelRaSmallOne] =&gt; E046    [TelRaSmallTwo] =&gt; E069    [TelRaSmallThree] =&gt; E077</span>
<a name="l00285"></a>00285   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;te&#39;</span>) {
<a name="l00286"></a>00286     <span class="comment">// tefullforms defined earlier</span>
<a name="l00287"></a>00287     $tepartialforms = <span class="stringliteral">&quot;E00D|E00E|E00F|E010|E011|E012|E013|E014|E015|E016|E017|E018|E019|E01A|E01B|E01C|E01D|E01E|E01F|E020|E021|E022|E023|E024|E025|E026|E027|E07C|E07D|E07E&quot;</span>;
<a name="l00288"></a>00288     $matraligs = <span class="stringliteral">&quot;E07F|E080|E081|E082|E083|E084|E085|E086|E087|E088|E089|E08A|E08B|E08C|E08D|E08E|E08F|E090|E091|E092|E093|E094|E095|E096|E097|E098|E099|E09A|E09B|E09C|E09D|E09E|E09F|E0A0|E0A1|E0A2|E0A3|E0A4|E0A5|E0A6|E0A7|E0A8|E0A9|E0AA|E0AB|E0AC|E0AD|E0AE|E0AF&quot;</span>;
<a name="l00289"></a>00289     $tevowels = <span class="stringliteral">&quot;0C3E|0C3F|0C40|0C46|0C47|0C56|0C4A|0C4B|0C4C&quot;</span>
<a name="l00290"></a>00290     .<span class="stringliteral">&quot;|0C41|0C42|0C43|0C44&quot;</span>;    <span class="comment">// post matras</span>
<a name="l00291"></a>00291     $vstr = preg_replace(<span class="stringliteral">&#39;/(&#39;</span>.$tevowels.<span class="stringliteral">&#39;) (E046|E069|E077)/&#39;</span>, <span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr);
<a name="l00292"></a>00292     <span class="keywordflow">while</span>(preg_match(<span class="stringliteral">&#39;/(&#39;</span>.$tepartialforms.<span class="stringliteral">&#39;) (E046|E069|E077)/&#39;</span>, $vstr)) {
<a name="l00293"></a>00293       $vstr = preg_replace(<span class="stringliteral">&#39;/(&#39;</span>.$tepartialforms.<span class="stringliteral">&#39;) (E046|E069|E077)/&#39;</span>, <span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr);
<a name="l00294"></a>00294     }
<a name="l00295"></a>00295     $vstr = preg_replace(<span class="stringliteral">&#39;/(&#39;</span>.$tefullforms .<span class="charliteral">&#39;|&#39;</span>.$matraligs.<span class="stringliteral">&#39;) (E046|E069|E077)/&#39;</span>, <span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr);
<a name="l00296"></a>00296   }
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 
<a name="l00299"></a>00299   <span class="comment">// KANNADA Shift Reph to  RIGHT [E00B]</span>
<a name="l00300"></a>00300   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;kn&#39;</span>) {
<a name="l00301"></a>00301     $knfullforms = <span class="stringliteral">&quot;0C95|0C96|0C97|0C98|0C99|0C9A|0C9B|0C9C|0C9D|0C9E|0C9F|0CA0|0CA1|0CA2|0CA3|0CA4|0CA5|0CA6|0CA7|0CA8|0CAA|0CAB|0CAC|0CAD|0CAE|0CAF|0CB0|0CB1|0CB2|0CB3|0CB5|0CB6|0CB7|0CB8|0CB9|E07D|E07E|E0A3&quot;</span>;
<a name="l00302"></a>00302     $knpartialforms = <span class="stringliteral">&quot;E00C|E00D|E00E|E00F|E010|E011|E012|E013|E014|0C9E|E015|E016|E017|E018|E019|E01A|E01B|E01C|E01D|E01E|E01F|E020|E021|E022|E023|E024|E025|E026|E027|E028|E029|E02A|E02B|E02C|E02D|E07F&quot;</span>;
<a name="l00303"></a>00303     <span class="keywordflow">while</span>(preg_match(<span class="stringliteral">&#39;/E00B (&#39;</span>.$knpartialforms.<span class="stringliteral">&#39;)/&#39;</span>, $vstr)) {
<a name="l00304"></a>00304       $vstr = preg_replace(<span class="stringliteral">&#39;/E00B (&#39;</span>.$knpartialforms.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;\\1 E00B&#39;</span>, $vstr);
<a name="l00305"></a>00305     }
<a name="l00306"></a>00306     $vstr = preg_replace(<span class="stringliteral">&#39;/E00B (&#39;</span>.$knfullforms.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;\\1 E00B&#39;</span>, $vstr);
<a name="l00307"></a>00307     <span class="comment">// ? Need to shift it beyond post-base vowels + presentation forms haven&#39;t found so can&#39;t test??</span>
<a name="l00308"></a>00308     $knvowels = <span class="stringliteral">&quot;0CBE|0CC0|0CC1|0CC2|0CC3|0CC4|0CC7|0CC8|0CCA|0CCB|0CD5|0CD6&quot;</span>;
<a name="l00309"></a>00309     $vstr = preg_replace(<span class="stringliteral">&#39;/E00B (&#39;</span>.$knvowels.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;\\1 E00B&#39;</span>, $vstr);
<a name="l00310"></a>00310   }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 
<a name="l00313"></a>00313   <span class="comment">// ORIYA Shift Reph to  RIGHT [E069|E06A|E06B|E06C]</span>
<a name="l00314"></a>00314   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;or&#39;</span>) {
<a name="l00315"></a>00315     $orrephs = <span class="stringliteral">&quot;E069|E06A|E06B|E06C&quot;</span>;
<a name="l00316"></a>00316     $orfullforms = <span class="stringliteral">&quot;0B15|0B16|0B17|0B18|0B19|0B1A|0B1B|0B1C|0B1D|0B1E|0B1F|0B20|0B21|0B22|0B23|0B24|0B25|0B26|0B27|0B28|0B29|0B2A|0B2B|0B2C|0B2D|0B2E|0B2F|0B30|0B31|0B32|0B33|0B34|0B35|0B36|0B37|0B38|E003|E004|E005|E006|E007|E008|E009|E00A|E00B|E00C|E00D|E00E|E00F|E010|E011|E012|E013|E014|E015|E016|E017|E018|E019|E01A|E01B|E01C|E01D|E01E|E01F|E020|E021|E022|E023|E024|E025|E026|E027|E028|E029|E02A|E02B|E02C|E02D|E02E|E02F|E030|E031|E032|E033|E034|E035|E036|E037&quot;</span>;
<a name="l00317"></a>00317     <span class="comment">// E123 - E147  FullHalant forms ? add to FullForms</span>
<a name="l00318"></a>00318     $orpartialforms = <span class="stringliteral">&quot;E090|E091|E092|E093|E094|E095|E096|E097|E098|E099|E09A|E09B|E09C|E09D|E09E|E09F|E0A0|E0A1|E0A2|E0A3|E0A4|E0A5|E0A6|E0A7|E0A8|E0A9|E0AA|E0AB|E0AC|E0AD|E0AE|E0AF|E0B0|E0B1|E0B2|E0B3|E0B4|E0B5|E0B6|E0B7|E0B8|E0B9|E0BA|E0BB|E0BC|E0BD|E0BE|E0BF|E0C0|E0C1|E0C2|E0C3|E0C4|E0C5|E0C6|E0C7|E0C8|E0C9|E0CA|E0CB|E0CC|E0CD|E0CE|E0CF|E0D0|E0D1|E0D2|E0D3|E0D4|E0D5|E0D6|E0D7|E0D8|E0D9|E0DA|E0DB|E0DC|E0DD|E0DE|E0DF|E0E0|E0E1|E0E2|E0E3|E0E4|E0E5|E0E6|E0E7|E0E8|E0E9|E0EA|E0EB|E0EC|E0ED|E0EE|E0EF|E0F0|E0F1|E0F2|E0F3|E0F4|E0F5&quot;</span>;
<a name="l00319"></a>00319 
<a name="l00320"></a>00320     <span class="comment">// Combined MatraIReph[E06D] split [0B3F &amp; E069] to allow reph to be shifted forwards</span>
<a name="l00321"></a>00321     $vstr = preg_replace(<span class="stringliteral">&#39;/(&#39;</span>.$orfullforms.<span class="stringliteral">&#39;) E06D (&#39;</span>.$orfullforms.<span class="stringliteral">&#39;) 0B3E/&#39;</span>, <span class="stringliteral">&#39;\\1 0B3F E069 \\2 0B3E&#39;</span>, $vstr);
<a name="l00322"></a>00322 
<a name="l00323"></a>00323 
<a name="l00324"></a>00324     <span class="keywordflow">while</span>(preg_match(<span class="stringliteral">&#39;/(&#39;</span>.$orrephs.<span class="stringliteral">&#39;) (&#39;</span>.$orpartialforms.<span class="stringliteral">&#39;)/&#39;</span>, $vstr)) {
<a name="l00325"></a>00325       $vstr = preg_replace(<span class="stringliteral">&#39;/(&#39;</span>.$orrephs.<span class="stringliteral">&#39;) (&#39;</span>.$orpartialforms.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr);
<a name="l00326"></a>00326     }
<a name="l00327"></a>00327     $vstr = preg_replace(<span class="stringliteral">&#39;/(&#39;</span>.$orrephs.<span class="stringliteral">&#39;) (&#39;</span>.$orfullforms.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr);
<a name="l00328"></a>00328 
<a name="l00329"></a>00329 
<a name="l00330"></a>00330     <span class="comment">// Combine Reph and MatraI</span>
<a name="l00331"></a>00331     $vstr = preg_replace(<span class="stringliteral">&#39;/E069 0B3F/&#39;</span>, <span class="stringliteral">&#39;E06D&#39;</span>, $vstr); <span class="comment">// Reph and MatraI -&gt; MatraIReph</span>
<a name="l00332"></a>00332     $vstr = preg_replace(<span class="stringliteral">&#39;/E06A 0B3F/&#39;</span>, <span class="stringliteral">&#39;E06E&#39;</span>, $vstr); <span class="comment">// Reph and MatraI -&gt; MatraIReph</span>
<a name="l00333"></a>00333     $vstr = preg_replace(<span class="stringliteral">&#39;/E06B 0B3F/&#39;</span>, <span class="stringliteral">&#39;E06F&#39;</span>, $vstr); <span class="comment">// Reph and MatraI -&gt; MatraIReph</span>
<a name="l00334"></a>00334   }
<a name="l00335"></a>00335 
<a name="l00336"></a>00336 
<a name="l00337"></a>00337   <span class="comment">// MALAYALAM Shift Reph to LEFT [E00E] (mlylmRaVattu)</span>
<a name="l00338"></a>00338   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;ml&#39;</span>) {
<a name="l00339"></a>00339     $halant = <span class="stringliteral">&quot;0D4D&quot;</span>; 
<a name="l00340"></a>00340     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$halant.<span class="stringliteral">&#39; 0D30/&#39;</span>,<span class="stringliteral">&#39;E00E \\1&#39;</span>, $vstr); <span class="comment">// 0D30 = Ra</span>
<a name="l00341"></a>00341     $vstr = preg_replace(<span class="stringliteral">&#39;/([A-F0-9]{4}) &#39;</span>.$halant.<span class="charliteral">&#39; &#39;</span>.$mlprebasedvowels .<span class="stringliteral">&#39; 0D30/&#39;</span>,<span class="stringliteral">&#39;\\2 E00E \\1&#39;</span>, $vstr);  <span class="comment">// 0D30 = Ra</span>
<a name="l00342"></a>00342 
<a name="l00343"></a>00343     $mlfullforms = <span class="stringliteral">&quot;0D15|0D16|0D17|0D18|0D19|0D1A|0D1B|0D1C|0D1D|0D1E|0D1F|0D20|0D21|0D22|0D23|0D24|0D25|0D26|0D27|0D28|0D2A|0D2B|0D2C|0D2D|0D2E|0D2F|0D30|0D31|0D32|0D33|0D34|0D35|0D36|0D37|0D38|0D39&quot;</span>
<a name="l00344"></a>00344     .<span class="stringliteral">&quot;|E010|E011|E012|E013|E014|E015|E016|E017|E018|E019|E01A|E01B|E01C|E01D|E01E|E01F|E020|E021|E022|E023|E024|E025|E026|E027|E028|E029|E02A|E02B|E02C|E02D|E02E|E02F|E030|E031|E032|E033|E034|E035|E036|E037|E038|E039|E03A|E03B|E03C|E03D|E03E|E03F|E040|E041|E042|E043|E044|E045|E046|E047|E048|E049|E04A|E04B|E04C|E04D|E04E|E04F|E050|E051|E052|E053|E054|E055|E056|E057|E058|E059|E05A|E05B|E05C|E05D|E05E|E05F|E060|E061|E062|E063|E064|E065|E066|E067|E068|E069|E06A|E06B|E06C|E06D|E06E|E06F|E070|E071|E072|E073|E074|E075|E076|E077|E078|E079|E07A|E07B|E07C|E07D&quot;</span>;
<a name="l00345"></a>00345     <span class="comment">// = FullConsonants + FullConjuncts</span>
<a name="l00346"></a>00346     $vstr = preg_replace(<span class="stringliteral">&#39;/(&#39;</span>.$mlfullforms.<span class="stringliteral">&#39;) E00E/&#39;</span>, <span class="stringliteral">&#39;E00E \\1&#39;</span>, $vstr);
<a name="l00347"></a>00347   }
<a name="l00348"></a>00348 
<a name="l00349"></a>00349   <span class="comment">//============================</span>
<a name="l00350"></a>00350 
<a name="l00351"></a>00351   <span class="comment">// SHIFT post-based vowels to Left of SmallForms (NOT to left of full forms)</span>
<a name="l00352"></a>00352 
<a name="l00353"></a>00353   <span class="comment">// TELUGU Shift </span>
<a name="l00354"></a>00354   <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;te&#39;</span>) {
<a name="l00355"></a>00355     <span class="comment">// NB $tevowels defined above</span>
<a name="l00356"></a>00356     <span class="comment">// NB $tefullforms defined above</span>
<a name="l00357"></a>00357     $tebelowbase1 = <span class="stringliteral">&quot;E02C|E02D|E02E|E02F|E030|E031|E032|E033|E034|E035|E036|E037|E038|E039|E03A|E03B|E03C|E03D|E03E|E03F|E040|E041|E042|E043|E044|E045|E046|E047|E048|E049|E04A|E04B|E04C|E04D|E04E&quot;</span>;   <span class="comment">//&#39;Small1KaToHa&#39;</span>
<a name="l00358"></a>00358     $tebelowbase2 = <span class="stringliteral">&quot;E04F|E050|E051|E052|E053|E054|E055|E056|E057|E058|E059|E05A|E05B|E05C|E05D|E05E|E05F|E060|E061|E062|E063|E064|E065|E066|E067|E068|E069|E06A|E06B|E06C|E06D|E06E|E06F|E070|E071&quot;</span>; <span class="comment">// &#39;Small2KaToHa&#39;</span>
<a name="l00359"></a>00359     $vstr = preg_replace(<span class="stringliteral">&#39;/(&#39;</span>.$tebelowbase2.<span class="stringliteral">&#39;) (&#39;</span>.$tevowels.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr);
<a name="l00360"></a>00360     $vstr = preg_replace(<span class="stringliteral">&#39;/(&#39;</span>.$tebelowbase1.<span class="stringliteral">&#39;) (&#39;</span>.$tevowels.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr);
<a name="l00361"></a>00361   }
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 
<a name="l00364"></a>00364   <span class="comment">// KANNADA Shift </span>
<a name="l00365"></a>00365   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;kn&#39;</span>) {
<a name="l00366"></a>00366     $knvowels = <span class="stringliteral">&quot;0CBE|0CC0|0CC1|0CC2|0CC3|0CC4|0CC7|0CC8|0CCA|0CCB|0CD5|0CD6&quot;</span>
<a name="l00367"></a>00367     .<span class="stringliteral">&quot;|E082|E083|E084|E085|E086|E087|E088|E089|E08A|E08B|E08C|E08D|E08E|E08F|E090|E091|E092|E093|E094|E095|E096|E097|E098|E099|E09A|E09B|E09C|E09D|E09E|E09F|E0A0|E0A1|E0A2|E0A3|E0A4|E0A5|E0A6|E0A7|E0A8|E0A9|E0AA|E0AB&quot;</span>
<a name="l00368"></a>00368     .<span class="stringliteral">&quot;|E004|E007|E008|E009|E00A&quot;</span>;
<a name="l00369"></a>00369     <span class="comment">// NB $kannvowels defined above</span>
<a name="l00370"></a>00370     <span class="comment">// NB $fullforms defined above</span>
<a name="l00371"></a>00371     <span class="comment">// $belowbase1/2 defined above</span>
<a name="l00372"></a>00372     $vstr = preg_replace(<span class="stringliteral">&#39;/(&#39;</span>.$belowbase2.<span class="stringliteral">&#39;) (&#39;</span>.$knvowels.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr);
<a name="l00373"></a>00373     $vstr = preg_replace(<span class="stringliteral">&#39;/(&#39;</span>.$belowbase1.<span class="stringliteral">&#39;) (&#39;</span>.$knvowels.<span class="stringliteral">&#39;)/&#39;</span>, <span class="stringliteral">&#39;\\2 \\1&#39;</span>, $vstr);
<a name="l00374"></a>00374     <span class="comment">//$vstr = preg_replace(&#39;/(&#39;.$fullforms.&#39;) (&#39;.$knvowels.&#39;)/&#39;, &#39;\\2 \\1&#39;, $vstr);</span>
<a name="l00375"></a>00375   }
<a name="l00376"></a>00376 
<a name="l00377"></a>00377 
<a name="l00378"></a>00378 
<a name="l00379"></a>00379   <span class="comment">//============================</span>
<a name="l00380"></a>00380   <span class="comment">// Clear unwanted ZWJ, ZWNJ</span>
<a name="l00381"></a>00381   <span class="comment">// MALAYALAM</span>
<a name="l00382"></a>00382   <span class="keywordflow">if</span> ($lang==<span class="stringliteral">&#39;ml&#39;</span>) {  
<a name="l00383"></a>00383     $vstr = preg_replace(<span class="stringliteral">&#39;/(200C|200D) /&#39;</span>,<span class="stringliteral">&#39;&#39;</span>, $vstr);
<a name="l00384"></a>00384   }
<a name="l00385"></a>00385 
<a name="l00386"></a>00386   <span class="comment">//============================</span>
<a name="l00387"></a>00387   <span class="comment">// END &amp; PUT IT BACK TOGETHER</span>
<a name="l00388"></a>00388   $vstr = preg_replace(<span class="stringliteral">&#39;/^0020 (.*) 0020$/&#39;</span>, <span class="stringliteral">&#39;\\1&#39;</span>, $vstr);
<a name="l00389"></a>00389 
<a name="l00390"></a>00390   $varr = explode(<span class="stringliteral">&quot; &quot;</span>,$vstr);
<a name="l00391"></a>00391   $e = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00392"></a>00392   <span class="keywordflow">foreach</span>($varr AS $v) {
<a name="l00393"></a>00393     $e.=code2utf(hexdec($v));
<a name="l00394"></a>00394   }
<a name="l00395"></a>00395   <span class="comment">//============================</span>
<a name="l00396"></a>00396 
<a name="l00397"></a>00397   <span class="keywordflow">return</span> $e;
<a name="l00398"></a>00398 }
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 
<a name="l00401"></a>00401 }
<a name="l00402"></a>00402 
<a name="l00403"></a>00403 ?&gt;
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>

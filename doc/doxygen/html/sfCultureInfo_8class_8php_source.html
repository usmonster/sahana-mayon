<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Sahana Agasti: lib/vendor/symfony/lib/i18n/sfCultureInfo.class.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>lib/vendor/symfony/lib/i18n/sfCultureInfo.class.php</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 
<a name="l00052"></a><a class="code" href="classsfCultureInfo.html">00052</a> <span class="keyword">class </span><a class="code" href="classsfCultureInfo.html">sfCultureInfo</a>
<a name="l00053"></a>00053 {
<a name="l00058"></a>00058   <span class="keyword">protected</span> $dataFileExt = <span class="stringliteral">&#39;.dat&#39;</span>;
<a name="l00059"></a>00059 
<a name="l00064"></a>00064   <span class="keyword">protected</span> $data = array();
<a name="l00065"></a>00065 
<a name="l00070"></a>00070   <span class="keyword">protected</span> $culture;
<a name="l00071"></a>00071 
<a name="l00076"></a>00076   <span class="keyword">protected</span> $dataDir;
<a name="l00077"></a>00077 
<a name="l00082"></a>00082   <span class="keyword">protected</span> $dataFiles = array();
<a name="l00083"></a>00083 
<a name="l00088"></a>00088   <span class="keyword">protected</span> $dateTimeFormat;
<a name="l00089"></a>00089 
<a name="l00094"></a>00094   <span class="keyword">protected</span> $numberFormat;
<a name="l00095"></a>00095   
<a name="l00100"></a>00100   <span class="keyword">protected</span> $properties = array();
<a name="l00101"></a>00101 
<a name="l00107"></a>00107   <span class="keyword">const</span> ALL = 0;
<a name="l00108"></a>00108 
<a name="l00114"></a>00114   <span class="keyword">const</span> NEUTRAL = 1;
<a name="l00115"></a>00115 
<a name="l00122"></a>00122   <span class="keyword">const</span> SPECIFIC = 2;
<a name="l00123"></a>00123 
<a name="l00130"></a><a class="code" href="classsfCultureInfo.html#acacfb421e89db300c39bdaf25a81b580">00130</a>   <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classsfCultureInfo.html#acacfb421e89db300c39bdaf25a81b580" title="Gets the sfCultureInfo that for this culture string.">getInstance</a>($culture = <span class="stringliteral">&#39;en&#39;</span>)
<a name="l00131"></a>00131   {
<a name="l00132"></a>00132     <span class="keyword">static</span> $instances = array();
<a name="l00133"></a>00133 
<a name="l00134"></a>00134     <span class="keywordflow">if</span> (!isset($instances[$culture]))
<a name="l00135"></a>00135     {
<a name="l00136"></a>00136       $instances[$culture] = <span class="keyword">new</span> <a class="code" href="classsfCultureInfo.html">sfCultureInfo</a>($culture);
<a name="l00137"></a>00137     }
<a name="l00138"></a>00138 
<a name="l00139"></a>00139     <span class="keywordflow">return</span> $instances[$culture];
<a name="l00140"></a>00140   }
<a name="l00141"></a>00141 
<a name="l00148"></a><a class="code" href="classsfCultureInfo.html#a353580aa12394ec7d50456053e0e78ae">00148</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#a353580aa12394ec7d50456053e0e78ae" title="Displays the culture name.">__toString</a>()
<a name="l00149"></a>00149   {
<a name="l00150"></a>00150     <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classsfCultureInfo.html#af63e6fe7df4319eb1e2b54ff5aede3d6" title="Gets the culture name in the format &amp;quot;&amp;lt;languagecode2&amp;gt;_(country/regioncode2)&amp;quot;...">getName</a>();
<a name="l00151"></a>00151   }
<a name="l00152"></a>00152 
<a name="l00160"></a><a class="code" href="classsfCultureInfo.html#a31e21e32aa36fa5cc42d24c8a2b8a9d7">00160</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#a31e21e32aa36fa5cc42d24c8a2b8a9d7" title="Allows functions that begins with &amp;#39;set&amp;#39; to be called directly as an attribute/property...">__get</a>($name)
<a name="l00161"></a>00161   {
<a name="l00162"></a>00162     $getProperty = <span class="stringliteral">&#39;get&#39;</span>.$name;
<a name="l00163"></a>00163     <span class="keywordflow">if</span> (in_array($getProperty, $this-&gt;properties))
<a name="l00164"></a>00164     {
<a name="l00165"></a>00165       <span class="keywordflow">return</span> $this-&gt;$getProperty();
<a name="l00166"></a>00166     }
<a name="l00167"></a>00167     <span class="keywordflow">else</span>
<a name="l00168"></a>00168     {
<a name="l00169"></a>00169       <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classsfException.html">sfException</a>(sprintf(<span class="stringliteral">&#39;Property %s does not exists.&#39;</span>, $name));
<a name="l00170"></a>00170     }
<a name="l00171"></a>00171   }
<a name="l00172"></a>00172 
<a name="l00180"></a><a class="code" href="classsfCultureInfo.html#aa5c60bfde6435a256213e7033ea6c125">00180</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#aa5c60bfde6435a256213e7033ea6c125" title="Allows functions that begins with &amp;#39;set&amp;#39; to be called directly as an attribute/property...">__set</a>($name, $value)
<a name="l00181"></a>00181   {
<a name="l00182"></a>00182     $setProperty = <span class="stringliteral">&#39;set&#39;</span>.$name;
<a name="l00183"></a>00183     <span class="keywordflow">if</span> (in_array($setProperty, $this-&gt;properties))
<a name="l00184"></a>00184     {
<a name="l00185"></a>00185       $this-&gt;$setProperty($value);
<a name="l00186"></a>00186     }
<a name="l00187"></a>00187     <span class="keywordflow">else</span>
<a name="l00188"></a>00188     {
<a name="l00189"></a>00189       <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classsfException.html">sfException</a>(sprintf(<span class="stringliteral">&#39;Property %s can not be set.&#39;</span>, $name));
<a name="l00190"></a>00190     }
<a name="l00191"></a>00191   }
<a name="l00192"></a>00192 
<a name="l00202"></a><a class="code" href="classsfCultureInfo.html#a2ab670df89a18e44f15bfdef0645e058">00202</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#a2ab670df89a18e44f15bfdef0645e058" title="Initializes a new instance of the sfCultureInfo class based on the culture specified...">__construct</a>($culture = <span class="stringliteral">&#39;en&#39;</span>)
<a name="l00203"></a>00203   {
<a name="l00204"></a>00204     $this-&gt;properties = get_class_methods($this);
<a name="l00205"></a>00205 
<a name="l00206"></a>00206     <span class="keywordflow">if</span> (empty($culture))
<a name="l00207"></a>00207     {
<a name="l00208"></a>00208       $culture = <span class="stringliteral">&#39;en&#39;</span>;
<a name="l00209"></a>00209     }
<a name="l00210"></a>00210 
<a name="l00211"></a>00211     $this-&gt;<a class="code" href="classsfCultureInfo.html#aba27dc0e05ee5bf1bb9e0d1065d9b62b" title="Gets the default directory for the ICU data.">dataDir</a> = <a class="code" href="classsfCultureInfo.html#aba27dc0e05ee5bf1bb9e0d1065d9b62b" title="Gets the default directory for the ICU data.">self::dataDir</a>();
<a name="l00212"></a>00212     $this-&gt;dataFileExt = <a class="code" href="classsfCultureInfo.html#aba015f939b52f51fc49073b1e3c91c82" title="Gets the filename extension for ICU data.">self::fileExt</a>();
<a name="l00213"></a>00213 
<a name="l00214"></a>00214     $this-&gt;<a class="code" href="classsfCultureInfo.html#afea3487bf6c967137eb919dd446ef13d" title="Sets the culture for the current instance.">setCulture</a>($culture);
<a name="l00215"></a>00215 
<a name="l00216"></a>00216     $this-&gt;<a class="code" href="classsfCultureInfo.html#ac80c928ff09713443a421bff787ce1ac" title="Loads the ICU culture data for the specific culture identifier.">loadCultureData</a>(<span class="stringliteral">&#39;root&#39;</span>);
<a name="l00217"></a>00217     $this-&gt;<a class="code" href="classsfCultureInfo.html#ac80c928ff09713443a421bff787ce1ac" title="Loads the ICU culture data for the specific culture identifier.">loadCultureData</a>($culture);
<a name="l00218"></a>00218   }
<a name="l00219"></a>00219 
<a name="l00226"></a><a class="code" href="classsfCultureInfo.html#aba27dc0e05ee5bf1bb9e0d1065d9b62b">00226</a>   <span class="keyword">protected</span> <span class="keyword">static</span> function <a class="code" href="classsfCultureInfo.html#aba27dc0e05ee5bf1bb9e0d1065d9b62b" title="Gets the default directory for the ICU data.">dataDir</a>()
<a name="l00227"></a>00227   {
<a name="l00228"></a>00228     <span class="keywordflow">return</span> dirname(__FILE__).<span class="stringliteral">&#39;/data/&#39;</span>;
<a name="l00229"></a>00229   }
<a name="l00230"></a>00230 
<a name="l00236"></a><a class="code" href="classsfCultureInfo.html#aba015f939b52f51fc49073b1e3c91c82">00236</a>   <span class="keyword">protected</span> <span class="keyword">static</span> function <a class="code" href="classsfCultureInfo.html#aba015f939b52f51fc49073b1e3c91c82" title="Gets the filename extension for ICU data.">fileExt</a>()
<a name="l00237"></a>00237   {
<a name="l00238"></a>00238     <span class="keywordflow">return</span> <span class="stringliteral">&#39;.dat&#39;</span>;
<a name="l00239"></a>00239   }
<a name="l00240"></a>00240 
<a name="l00248"></a><a class="code" href="classsfCultureInfo.html#a43e6a8aa8e95a956149e534f020de26f">00248</a>   <span class="keyword">static</span> <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#a43e6a8aa8e95a956149e534f020de26f" title="Determines if a given culture is valid.">validCulture</a>($culture)
<a name="l00249"></a>00249   {
<a name="l00250"></a>00250     <span class="keywordflow">if</span> (preg_match(<span class="stringliteral">&#39;/^[a-z]{2}(_[A-Z]{2,5}){0,2}$/&#39;</span>, $culture))
<a name="l00251"></a>00251     {
<a name="l00252"></a>00252       <span class="keywordflow">return</span> is_file(self::dataDir().$culture.self::fileExt());
<a name="l00253"></a>00253     }
<a name="l00254"></a>00254 
<a name="l00255"></a>00255     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00256"></a>00256   }
<a name="l00257"></a>00257 
<a name="l00264"></a><a class="code" href="classsfCultureInfo.html#afea3487bf6c967137eb919dd446ef13d">00264</a>   <span class="keyword">protected</span> function <a class="code" href="classsfCultureInfo.html#afea3487bf6c967137eb919dd446ef13d" title="Sets the culture for the current instance.">setCulture</a>($culture)
<a name="l00265"></a>00265   {
<a name="l00266"></a>00266     <span class="keywordflow">if</span> (!empty($culture))
<a name="l00267"></a>00267     {
<a name="l00268"></a>00268       <span class="keywordflow">if</span> (!preg_match(<span class="stringliteral">&#39;/^[a-z]{2}(_[A-Z]{2,5}){0,2}$/&#39;</span>, $culture))
<a name="l00269"></a>00269       {
<a name="l00270"></a>00270         <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classsfException.html">sfException</a>(sprintf(<span class="stringliteral">&#39;Invalid culture supplied: %s&#39;</span>, $culture));
<a name="l00271"></a>00271       }
<a name="l00272"></a>00272     }
<a name="l00273"></a>00273 
<a name="l00274"></a>00274     $this-&gt;culture = $culture;
<a name="l00275"></a>00275   }
<a name="l00276"></a>00276 
<a name="l00282"></a><a class="code" href="classsfCultureInfo.html#ac80c928ff09713443a421bff787ce1ac">00282</a>   <span class="keyword">protected</span> function <a class="code" href="classsfCultureInfo.html#ac80c928ff09713443a421bff787ce1ac" title="Loads the ICU culture data for the specific culture identifier.">loadCultureData</a>($culture)
<a name="l00283"></a>00283   {
<a name="l00284"></a>00284     $file_parts = explode(<span class="charliteral">&#39;_&#39;</span>, $culture);
<a name="l00285"></a>00285     $current_part = $file_parts[0];
<a name="l00286"></a>00286 
<a name="l00287"></a>00287     $files = array($current_part);
<a name="l00288"></a>00288 
<a name="l00289"></a>00289     <span class="keywordflow">for</span> ($i = 1, $max = count($file_parts); $i &lt; $max; $i++)
<a name="l00290"></a>00290     {
<a name="l00291"></a>00291       $current_part .= <span class="charliteral">&#39;_&#39;</span>.$file_parts[$i];
<a name="l00292"></a>00292       $files[] = $current_part;
<a name="l00293"></a>00293     }
<a name="l00294"></a>00294 
<a name="l00295"></a>00295     <span class="keywordflow">foreach</span> ($files as $file)
<a name="l00296"></a>00296     {
<a name="l00297"></a>00297       $filename = $this-&gt;<a class="code" href="classsfCultureInfo.html#aba27dc0e05ee5bf1bb9e0d1065d9b62b" title="Gets the default directory for the ICU data.">dataDir</a>.$file.$this-&gt;dataFileExt;
<a name="l00298"></a>00298 
<a name="l00299"></a>00299       <span class="keywordflow">if</span> (is_file($filename) == <span class="keyword">false</span>)
<a name="l00300"></a>00300       {
<a name="l00301"></a>00301         <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classsfException.html">sfException</a>(sprintf(<span class="stringliteral">&#39;Data file for &quot;%s&quot; was not found.&#39;</span>, $file));
<a name="l00302"></a>00302       }
<a name="l00303"></a>00303 
<a name="l00304"></a>00304       <span class="keywordflow">if</span> (in_array($filename, $this-&gt;dataFiles) == <span class="keyword">false</span>)
<a name="l00305"></a>00305       {
<a name="l00306"></a>00306         array_unshift($this-&gt;dataFiles, $file);
<a name="l00307"></a>00307 
<a name="l00308"></a>00308         $data = &amp;$this-&gt;<a class="code" href="classsfCultureInfo.html#adec8e7a2830ba80359ba625d0c995c63" title="Gets the data by unserializing the ICU data from disk.">getData</a>($filename);
<a name="l00309"></a>00309         $this-&gt;data[$file] = &amp;$data;
<a name="l00310"></a>00310 
<a name="l00311"></a>00311         <span class="keywordflow">if</span> (isset($data[<span class="stringliteral">&#39;__ALIAS&#39;</span>]))
<a name="l00312"></a>00312         {
<a name="l00313"></a>00313           $this-&gt;<a class="code" href="classsfCultureInfo.html#ac80c928ff09713443a421bff787ce1ac" title="Loads the ICU culture data for the specific culture identifier.">loadCultureData</a>($data[<span class="stringliteral">&#39;__ALIAS&#39;</span>]);
<a name="l00314"></a>00314         }
<a name="l00315"></a>00315         unset($data);
<a name="l00316"></a>00316       }
<a name="l00317"></a>00317     }
<a name="l00318"></a>00318   }
<a name="l00319"></a>00319 
<a name="l00328"></a><a class="code" href="classsfCultureInfo.html#adec8e7a2830ba80359ba625d0c995c63">00328</a>   <span class="keyword">protected</span> function &amp;<a class="code" href="classsfCultureInfo.html#adec8e7a2830ba80359ba625d0c995c63" title="Gets the data by unserializing the ICU data from disk.">getData</a>($filename)
<a name="l00329"></a>00329   {
<a name="l00330"></a>00330     <span class="keyword">static</span> $data  = array();
<a name="l00331"></a>00331     <span class="keyword">static</span> $files = array();
<a name="l00332"></a>00332 
<a name="l00333"></a>00333     <span class="keywordflow">if</span> (!in_array($filename, $files))
<a name="l00334"></a>00334     {
<a name="l00335"></a>00335       $data[$filename] = unserialize(file_get_contents($filename));
<a name="l00336"></a>00336       $files[] = $filename;
<a name="l00337"></a>00337     }
<a name="l00338"></a>00338 
<a name="l00339"></a>00339     <span class="keywordflow">return</span> $data[$filename];
<a name="l00340"></a>00340   }
<a name="l00341"></a>00341 
<a name="l00357"></a><a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd">00357</a>   <span class="keyword">protected</span> function <a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>($path = <span class="charliteral">&#39;/&#39;</span>, $merge = <span class="keyword">false</span>)
<a name="l00358"></a>00358   {
<a name="l00359"></a>00359     $result = array();
<a name="l00360"></a>00360     <span class="keywordflow">foreach</span> ($this-&gt;dataFiles as $section)
<a name="l00361"></a>00361     {
<a name="l00362"></a>00362       $info = $this-&gt;<a class="code" href="classsfCultureInfo.html#adb6094bbcb75bd86f92950c365036ff9" title="Searches the array for a specific value using a path separated using slash &amp;quot;/&amp;quot;...">searchArray</a>($this-&gt;data[$section], $path);
<a name="l00363"></a>00363 
<a name="l00364"></a>00364       <span class="keywordflow">if</span> ($info)
<a name="l00365"></a>00365       {
<a name="l00366"></a>00366         <span class="keywordflow">if</span> ($merge)
<a name="l00367"></a>00367         {
<a name="l00368"></a>00368           $result = $this-&gt;array_add($result, $info);
<a name="l00369"></a>00369         }
<a name="l00370"></a>00370         <span class="keywordflow">else</span>
<a name="l00371"></a>00371         {
<a name="l00372"></a>00372           <span class="keywordflow">return</span> $info;
<a name="l00373"></a>00373         }
<a name="l00374"></a>00374       }
<a name="l00375"></a>00375     }
<a name="l00376"></a>00376 
<a name="l00377"></a>00377     <span class="keywordflow">return</span> $result;
<a name="l00378"></a>00378   }
<a name="l00379"></a>00379 
<a name="l00385"></a>00385   <span class="keyword">private</span> function array_add($array1, $array2)
<a name="l00386"></a>00386   {
<a name="l00387"></a>00387     <span class="keywordflow">foreach</span> ($array2 as $key =&gt; $value)
<a name="l00388"></a>00388     {
<a name="l00389"></a>00389       <span class="keywordflow">if</span> (isset($array1[$key]))
<a name="l00390"></a>00390       {
<a name="l00391"></a>00391         <span class="keywordflow">if</span>(is_array($array1[$key]) &amp;&amp; is_array($value))
<a name="l00392"></a>00392         {
<a name="l00393"></a>00393           $array1[$key] = $this-&gt;array_add($array1[$key], $value);
<a name="l00394"></a>00394         }
<a name="l00395"></a>00395       }
<a name="l00396"></a>00396       <span class="keywordflow">else</span>
<a name="l00397"></a>00397       {
<a name="l00398"></a>00398         $array1[$key] = $value;
<a name="l00399"></a>00399       }
<a name="l00400"></a>00400     }
<a name="l00401"></a>00401     <span class="keywordflow">return</span> $array1;
<a name="l00402"></a>00402   }
<a name="l00403"></a>00403 
<a name="l00413"></a><a class="code" href="classsfCultureInfo.html#adb6094bbcb75bd86f92950c365036ff9">00413</a>   <span class="keyword">protected</span> function <a class="code" href="classsfCultureInfo.html#adb6094bbcb75bd86f92950c365036ff9" title="Searches the array for a specific value using a path separated using slash &amp;quot;/&amp;quot;...">searchArray</a>($info, $path = <span class="charliteral">&#39;/&#39;</span>)
<a name="l00414"></a>00414   {
<a name="l00415"></a>00415     $index = explode(<span class="charliteral">&#39;/&#39;</span>, $path);
<a name="l00416"></a>00416 
<a name="l00417"></a>00417     $array = $info;
<a name="l00418"></a>00418 
<a name="l00419"></a>00419     <span class="keywordflow">for</span> ($i = 0, $max = count($index); $i &lt; $max; $i++)
<a name="l00420"></a>00420     {
<a name="l00421"></a>00421       $k = $index[$i];
<a name="l00422"></a>00422       <span class="keywordflow">if</span> ($i &lt; $max - 1 &amp;&amp; isset($array[$k]))
<a name="l00423"></a>00423       {
<a name="l00424"></a>00424         $array = $array[$k];
<a name="l00425"></a>00425       }
<a name="l00426"></a>00426       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($i == $max - 1 &amp;&amp; isset($array[$k]))
<a name="l00427"></a>00427       {
<a name="l00428"></a>00428         <span class="keywordflow">return</span> $array[$k];
<a name="l00429"></a>00429       }
<a name="l00430"></a>00430     }
<a name="l00431"></a>00431   }
<a name="l00432"></a>00432   
<a name="l00439"></a><a class="code" href="classsfCultureInfo.html#af63e6fe7df4319eb1e2b54ff5aede3d6">00439</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#af63e6fe7df4319eb1e2b54ff5aede3d6" title="Gets the culture name in the format &amp;quot;&amp;lt;languagecode2&amp;gt;_(country/regioncode2)&amp;quot;...">getName</a>()
<a name="l00440"></a>00440   {
<a name="l00441"></a>00441     <span class="keywordflow">return</span> $this-&gt;culture;
<a name="l00442"></a>00442   }
<a name="l00443"></a>00443 
<a name="l00450"></a><a class="code" href="classsfCultureInfo.html#a3a7a95b5c65cc10b232eb0b462441313">00450</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#a3a7a95b5c65cc10b232eb0b462441313" title="Gets the sfDateTimeFormatInfo that defines the culturally appropriate format of displaying...">getDateTimeFormat</a>()
<a name="l00451"></a>00451   {
<a name="l00452"></a>00452     <span class="keywordflow">if</span> (null === $this-&gt;dateTimeFormat)
<a name="l00453"></a>00453     {
<a name="l00454"></a>00454       $calendar = $this-&gt;<a class="code" href="classsfCultureInfo.html#aa9d54827cc939f827785e2c944c5edf2" title="Gets the default calendar used by the culture, e.g.">getCalendar</a>();
<a name="l00455"></a>00455       $info = $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&quot;calendar/{$calendar}&quot;</span>, <span class="keyword">true</span>);
<a name="l00456"></a>00456       $this-&gt;<a class="code" href="classsfCultureInfo.html#a4691cf9a9c11034762b47cad836ea2dd" title="Sets the date time format information.">setDateTimeFormat</a>(<span class="keyword">new</span> <a class="code" href="classsfDateTimeFormatInfo.html">sfDateTimeFormatInfo</a>($info));
<a name="l00457"></a>00457     }
<a name="l00458"></a>00458 
<a name="l00459"></a>00459     <span class="keywordflow">return</span> $this-&gt;dateTimeFormat;
<a name="l00460"></a>00460   }
<a name="l00461"></a>00461 
<a name="l00467"></a><a class="code" href="classsfCultureInfo.html#a4691cf9a9c11034762b47cad836ea2dd">00467</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#a4691cf9a9c11034762b47cad836ea2dd" title="Sets the date time format information.">setDateTimeFormat</a>($dateTimeFormat)
<a name="l00468"></a>00468   {
<a name="l00469"></a>00469     $this-&gt;dateTimeFormat = $dateTimeFormat;
<a name="l00470"></a>00470   }
<a name="l00471"></a>00471 
<a name="l00477"></a><a class="code" href="classsfCultureInfo.html#aa9d54827cc939f827785e2c944c5edf2">00477</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#aa9d54827cc939f827785e2c944c5edf2" title="Gets the default calendar used by the culture, e.g.">getCalendar</a>()
<a name="l00478"></a>00478   {
<a name="l00479"></a>00479     <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&#39;calendar/default&#39;</span>);
<a name="l00480"></a>00480   }
<a name="l00481"></a>00481 
<a name="l00489"></a><a class="code" href="classsfCultureInfo.html#ae27713d1e1f7258bdf584b447cbc08d2">00489</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#ae27713d1e1f7258bdf584b447cbc08d2" title="Gets the culture name in the language that the culture is set to display.">getNativeName</a>()
<a name="l00490"></a>00490   {
<a name="l00491"></a>00491     $lang = substr($this-&gt;culture, 0, 2);
<a name="l00492"></a>00492     $reg = substr($this-&gt;culture, 3, 2);
<a name="l00493"></a>00493     $language = $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&quot;Languages/{$lang}&quot;</span>);
<a name="l00494"></a>00494     $region = $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&quot;Countries/{$reg}&quot;</span>);
<a name="l00495"></a>00495     <span class="keywordflow">if</span> ($region)
<a name="l00496"></a>00496     {
<a name="l00497"></a>00497       <span class="keywordflow">return</span> $language.<span class="stringliteral">&#39; (&#39;</span>.$region.<span class="charliteral">&#39;)&#39;</span>;
<a name="l00498"></a>00498     }
<a name="l00499"></a>00499     <span class="keywordflow">else</span>
<a name="l00500"></a>00500     {
<a name="l00501"></a>00501       <span class="keywordflow">return</span> $language;
<a name="l00502"></a>00502     }
<a name="l00503"></a>00503   }
<a name="l00504"></a>00504 
<a name="l00512"></a><a class="code" href="classsfCultureInfo.html#aedbf2f4dc8e24e5526352c65cd6ecdc9">00512</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#aedbf2f4dc8e24e5526352c65cd6ecdc9" title="Gets the culture name in English.">getEnglishName</a>()
<a name="l00513"></a>00513   {
<a name="l00514"></a>00514     $lang = substr($this-&gt;culture, 0, 2);
<a name="l00515"></a>00515     $reg = substr($this-&gt;culture, 3, 2);
<a name="l00516"></a>00516     $culture = $this-&gt;<a class="code" href="classsfCultureInfo.html#af07aaa402aeafad725ab7c3e3648253e" title="Gets the sfCultureInfo that is culture-independent (invariant).">getInvariantCulture</a>();
<a name="l00517"></a>00517 
<a name="l00518"></a>00518     $language = $culture-&gt;findInfo(<span class="stringliteral">&quot;Languages/{$lang}&quot;</span>);
<a name="l00519"></a>00519     <span class="keywordflow">if</span> (count($language) == 0)
<a name="l00520"></a>00520     {
<a name="l00521"></a>00521       <span class="keywordflow">return</span> $this-&gt;culture;
<a name="l00522"></a>00522     }
<a name="l00523"></a>00523 
<a name="l00524"></a>00524     $region = $culture-&gt;findInfo(<span class="stringliteral">&quot;Countries/{$reg}&quot;</span>);
<a name="l00525"></a>00525 
<a name="l00526"></a>00526     <span class="keywordflow">return</span> $region ? $language.<span class="stringliteral">&#39; (&#39;</span>.$region.<span class="charliteral">&#39;)&#39;</span> : $language;
<a name="l00527"></a>00527   }
<a name="l00528"></a>00528 
<a name="l00537"></a><a class="code" href="classsfCultureInfo.html#af07aaa402aeafad725ab7c3e3648253e">00537</a>   <span class="keyword">static</span> function <a class="code" href="classsfCultureInfo.html#af07aaa402aeafad725ab7c3e3648253e" title="Gets the sfCultureInfo that is culture-independent (invariant).">getInvariantCulture</a>()
<a name="l00538"></a>00538   {
<a name="l00539"></a>00539     <span class="keyword">static</span> $invariant;
<a name="l00540"></a>00540 
<a name="l00541"></a>00541     <span class="keywordflow">if</span> (null === $invariant)
<a name="l00542"></a>00542     {
<a name="l00543"></a>00543       $invariant = <span class="keyword">new</span> <a class="code" href="classsfCultureInfo.html">sfCultureInfo</a>();
<a name="l00544"></a>00544     }
<a name="l00545"></a>00545 
<a name="l00546"></a>00546     <span class="keywordflow">return</span> $invariant;
<a name="l00547"></a>00547   }
<a name="l00548"></a>00548 
<a name="l00556"></a><a class="code" href="classsfCultureInfo.html#a54609b5ddc2c1aece4e9ebe040a378be">00556</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#a54609b5ddc2c1aece4e9ebe040a378be" title="Gets a value indicating whether the current sfCultureInfo represents a neutral culture...">getIsNeutralCulture</a>()
<a name="l00557"></a>00557   {
<a name="l00558"></a>00558     <span class="keywordflow">return</span> strlen($this-&gt;culture) == 2;
<a name="l00559"></a>00559   }
<a name="l00560"></a>00560 
<a name="l00567"></a><a class="code" href="classsfCultureInfo.html#af4dc605cfc17c4157a93fcdcbc2296a9">00567</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#af4dc605cfc17c4157a93fcdcbc2296a9" title="Gets the sfNumberFormatInfo that defines the culturally appropriate format of displaying...">getNumberFormat</a>()
<a name="l00568"></a>00568   {
<a name="l00569"></a>00569     <span class="keywordflow">if</span> (null === $this-&gt;numberFormat)
<a name="l00570"></a>00570     {
<a name="l00571"></a>00571       $elements = $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&#39;NumberElements&#39;</span>);
<a name="l00572"></a>00572       $patterns = $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&#39;NumberPatterns&#39;</span>);
<a name="l00573"></a>00573       $currencies = $this-&gt;<a class="code" href="classsfCultureInfo.html#ab59484f11801f287154b07af9d0fc7af" title="Gets a list of currencies in the language of the localized version.">getCurrencies</a>(null, <span class="keyword">true</span>);
<a name="l00574"></a>00574       $data = array(<span class="stringliteral">&#39;NumberElements&#39;</span> =&gt; $elements, <span class="stringliteral">&#39;NumberPatterns&#39;</span> =&gt; $patterns, <span class="stringliteral">&#39;Currencies&#39;</span> =&gt; $currencies);
<a name="l00575"></a>00575 
<a name="l00576"></a>00576       $this-&gt;<a class="code" href="classsfCultureInfo.html#a0dd6811c2c401dd2cd690b3c03a80e45" title="Sets the number format information.">setNumberFormat</a>(<span class="keyword">new</span> <a class="code" href="classsfNumberFormatInfo.html">sfNumberFormatInfo</a>($data));
<a name="l00577"></a>00577     }
<a name="l00578"></a>00578 
<a name="l00579"></a>00579     <span class="keywordflow">return</span> $this-&gt;numberFormat;
<a name="l00580"></a>00580   }
<a name="l00581"></a>00581 
<a name="l00587"></a><a class="code" href="classsfCultureInfo.html#a0dd6811c2c401dd2cd690b3c03a80e45">00587</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#a0dd6811c2c401dd2cd690b3c03a80e45" title="Sets the number format information.">setNumberFormat</a>($numberFormat)
<a name="l00588"></a>00588   {
<a name="l00589"></a>00589     $this-&gt;numberFormat = $numberFormat;
<a name="l00590"></a>00590   }
<a name="l00591"></a>00591 
<a name="l00598"></a><a class="code" href="classsfCultureInfo.html#a6ef788241741f552a172953f3050b567">00598</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#a6ef788241741f552a172953f3050b567" title="Gets the sfCultureInfo that represents the parent culture of the current sfCultureInfo...">getParent</a>()
<a name="l00599"></a>00599   {
<a name="l00600"></a>00600     <span class="keywordflow">if</span> (strlen($this-&gt;culture) == 2)
<a name="l00601"></a>00601     {
<a name="l00602"></a>00602       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classsfCultureInfo.html#af07aaa402aeafad725ab7c3e3648253e" title="Gets the sfCultureInfo that is culture-independent (invariant).">getInvariantCulture</a>();
<a name="l00603"></a>00603     }
<a name="l00604"></a>00604 
<a name="l00605"></a>00605     <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classsfCultureInfo.html">sfCultureInfo</a>(substr($this-&gt;culture, 0, 2));
<a name="l00606"></a>00606   }
<a name="l00607"></a>00607 
<a name="l00618"></a><a class="code" href="classsfCultureInfo.html#a98d6c1bb6868326f3c5345a4417d4c28">00618</a>   <span class="keyword">static</span> function <a class="code" href="classsfCultureInfo.html#a98d6c1bb6868326f3c5345a4417d4c28" title="Gets the list of supported cultures filtered by the specified culture type.">getCultures</a>($type = sfCultureInfo::ALL)
<a name="l00619"></a>00619   {
<a name="l00620"></a>00620     $dataDir = <a class="code" href="classsfCultureInfo.html#aba27dc0e05ee5bf1bb9e0d1065d9b62b" title="Gets the default directory for the ICU data.">sfCultureInfo::dataDir</a>();
<a name="l00621"></a>00621     $dataExt = <a class="code" href="classsfCultureInfo.html#aba015f939b52f51fc49073b1e3c91c82" title="Gets the filename extension for ICU data.">sfCultureInfo::fileExt</a>();
<a name="l00622"></a>00622     $dir = dir($dataDir);
<a name="l00623"></a>00623 
<a name="l00624"></a>00624     $neutral = array();
<a name="l00625"></a>00625     $specific = array();
<a name="l00626"></a>00626 
<a name="l00627"></a>00627     <span class="keywordflow">while</span> (<span class="keyword">false</span> !== ($entry = $dir-&gt;read()))
<a name="l00628"></a>00628     {
<a name="l00629"></a>00629       <span class="keywordflow">if</span> (is_file($dataDir.$entry) &amp;&amp; substr($entry, -4) == $dataExt &amp;&amp; $entry != <span class="stringliteral">&#39;root&#39;</span>.$dataExt)
<a name="l00630"></a>00630       {
<a name="l00631"></a>00631         $culture = substr($entry, 0, -4);
<a name="l00632"></a>00632         <span class="keywordflow">if</span> (strlen($culture) == 2)
<a name="l00633"></a>00633         {
<a name="l00634"></a>00634           $neutral[] = $culture;
<a name="l00635"></a>00635         }
<a name="l00636"></a>00636         <span class="keywordflow">else</span>
<a name="l00637"></a>00637         {
<a name="l00638"></a>00638           $specific[] = $culture;
<a name="l00639"></a>00639         }
<a name="l00640"></a>00640       }
<a name="l00641"></a>00641     }
<a name="l00642"></a>00642     $dir-&gt;close();
<a name="l00643"></a>00643 
<a name="l00644"></a>00644     <span class="keywordflow">switch</span> ($type)
<a name="l00645"></a>00645     {
<a name="l00646"></a>00646       <span class="keywordflow">case</span> sfCultureInfo::ALL:
<a name="l00647"></a>00647         $all =  array_merge($neutral, $specific);
<a name="l00648"></a>00648         sort($all);
<a name="l00649"></a>00649         <span class="keywordflow">return</span> $all;
<a name="l00650"></a>00650         <span class="keywordflow">break</span>;
<a name="l00651"></a>00651       <span class="keywordflow">case</span> sfCultureInfo::NEUTRAL:
<a name="l00652"></a>00652         <span class="keywordflow">return</span> $neutral;
<a name="l00653"></a>00653         <span class="keywordflow">break</span>;
<a name="l00654"></a>00654       <span class="keywordflow">case</span> sfCultureInfo::SPECIFIC:
<a name="l00655"></a>00655         <span class="keywordflow">return</span> $specific;
<a name="l00656"></a>00656         <span class="keywordflow">break</span>;
<a name="l00657"></a>00657     }
<a name="l00658"></a>00658   }
<a name="l00659"></a>00659 
<a name="l00667"></a><a class="code" href="classsfCultureInfo.html#ac21ea40304849d33695eeb46c65cba7a">00667</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#ac21ea40304849d33695eeb46c65cba7a" title="Get the country name in the current culture for the given code.">getCountry</a>($code)
<a name="l00668"></a>00668   {
<a name="l00669"></a>00669     $countries = $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&#39;Countries&#39;</span>, <span class="keyword">true</span>);
<a name="l00670"></a>00670 
<a name="l00671"></a>00671     <span class="keywordflow">if</span> (!isset($countries[$code]))
<a name="l00672"></a>00672     {
<a name="l00673"></a>00673       <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException(sprintf(<span class="stringliteral">&#39;The country %s does not exist.&#39;</span>, $code));
<a name="l00674"></a>00674     }
<a name="l00675"></a>00675 
<a name="l00676"></a>00676     <span class="keywordflow">return</span> $countries[$code];
<a name="l00677"></a>00677   }
<a name="l00678"></a>00678 
<a name="l00686"></a><a class="code" href="classsfCultureInfo.html#aae541288deb6caaf4174d3fe616237b5">00686</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#aae541288deb6caaf4174d3fe616237b5" title="Get the currency name in the current culture for the given code.">getCurrency</a>($code)
<a name="l00687"></a>00687   {
<a name="l00688"></a>00688     $currencies = $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&#39;Currencies&#39;</span>, <span class="keyword">true</span>);
<a name="l00689"></a>00689 
<a name="l00690"></a>00690     <span class="keywordflow">if</span> (!isset($currencies[$code]))
<a name="l00691"></a>00691     {
<a name="l00692"></a>00692       <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException(sprintf(<span class="stringliteral">&#39;The currency %s does not exist.&#39;</span>, $code));
<a name="l00693"></a>00693     }
<a name="l00694"></a>00694 
<a name="l00695"></a>00695     <span class="keywordflow">return</span> $currencies[$code][1];
<a name="l00696"></a>00696   }
<a name="l00697"></a>00697 
<a name="l00705"></a><a class="code" href="classsfCultureInfo.html#a2c6aed5e1374cf57f749c76411b099fc">00705</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#a2c6aed5e1374cf57f749c76411b099fc" title="Get the language name in the current culture for the given code.">getLanguage</a>($code)
<a name="l00706"></a>00706   {
<a name="l00707"></a>00707     $languages = $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&#39;Languages&#39;</span>, <span class="keyword">true</span>);
<a name="l00708"></a>00708 
<a name="l00709"></a>00709     <span class="keywordflow">if</span> (!isset($languages[$code]))
<a name="l00710"></a>00710     {
<a name="l00711"></a>00711       <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException(sprintf(<span class="stringliteral">&#39;The language %s does not exist.&#39;</span>, $code));
<a name="l00712"></a>00712     }
<a name="l00713"></a>00713 
<a name="l00714"></a>00714     <span class="keywordflow">return</span> $languages[$code];
<a name="l00715"></a>00715   }
<a name="l00716"></a>00716 
<a name="l00724"></a><a class="code" href="classsfCultureInfo.html#ac515dce0963ee787493e24ce89698470">00724</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#ac515dce0963ee787493e24ce89698470" title="Gets a list of countries in the language of the localized version.">getCountries</a>($countries = null)
<a name="l00725"></a>00725   {
<a name="l00726"></a>00726     <span class="comment">// remove integer keys as they do not represent countries</span>
<a name="l00727"></a>00727     $allCountries = array();
<a name="l00728"></a>00728     <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&#39;Countries&#39;</span>, <span class="keyword">true</span>) as $key =&gt; $value)
<a name="l00729"></a>00729     {
<a name="l00730"></a>00730       <span class="keywordflow">if</span> (!is_int($key))
<a name="l00731"></a>00731       {
<a name="l00732"></a>00732         $allCountries[$key] = $value;
<a name="l00733"></a>00733       }
<a name="l00734"></a>00734     }
<a name="l00735"></a>00735 
<a name="l00736"></a>00736     <span class="comment">// restrict countries to a sub-set</span>
<a name="l00737"></a>00737     <span class="keywordflow">if</span> (null !== $countries)
<a name="l00738"></a>00738     {
<a name="l00739"></a>00739       <span class="keywordflow">if</span> ($problems = array_diff($countries, array_keys($allCountries)))
<a name="l00740"></a>00740       {
<a name="l00741"></a>00741         <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException(sprintf(<span class="stringliteral">&#39;The following countries do not exist: %s.&#39;</span>, implode(<span class="stringliteral">&#39;, &#39;</span>, $problems)));
<a name="l00742"></a>00742       }
<a name="l00743"></a>00743 
<a name="l00744"></a>00744       $allCountries = array_intersect_key($allCountries, array_flip($countries));
<a name="l00745"></a>00745     }
<a name="l00746"></a>00746 
<a name="l00747"></a>00747     $this-&gt;<a class="code" href="classsfCultureInfo.html#a67fbccde6271b88200cc230e9da0efca" title="sorts the passed array according to the locale of this sfCultureInfo class">sortArray</a>($allCountries);
<a name="l00748"></a>00748 
<a name="l00749"></a>00749     <span class="keywordflow">return</span> $allCountries;
<a name="l00750"></a>00750   }
<a name="l00751"></a>00751 
<a name="l00760"></a><a class="code" href="classsfCultureInfo.html#ab59484f11801f287154b07af9d0fc7af">00760</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#ab59484f11801f287154b07af9d0fc7af" title="Gets a list of currencies in the language of the localized version.">getCurrencies</a>($currencies = null, $full = <span class="keyword">false</span>)
<a name="l00761"></a>00761   {
<a name="l00762"></a>00762     $allCurrencies = $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&#39;Currencies&#39;</span>, <span class="keyword">true</span>);
<a name="l00763"></a>00763 
<a name="l00764"></a>00764     <span class="comment">// restrict countries to a sub-set</span>
<a name="l00765"></a>00765     <span class="keywordflow">if</span> (null !== $currencies)
<a name="l00766"></a>00766     {
<a name="l00767"></a>00767       <span class="keywordflow">if</span> ($problems = array_diff($currencies, array_keys($allCurrencies)))
<a name="l00768"></a>00768       {
<a name="l00769"></a>00769         <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException(sprintf(<span class="stringliteral">&#39;The following currencies do not exist: %s.&#39;</span>, implode(<span class="stringliteral">&#39;, &#39;</span>, $problems)));
<a name="l00770"></a>00770       }
<a name="l00771"></a>00771 
<a name="l00772"></a>00772       $allCurrencies = array_intersect_key($allCurrencies, array_flip($currencies));
<a name="l00773"></a>00773     }
<a name="l00774"></a>00774 
<a name="l00775"></a>00775     <span class="keywordflow">if</span> (!$full)
<a name="l00776"></a>00776     {
<a name="l00777"></a>00777       <span class="keywordflow">foreach</span> ($allCurrencies as $key =&gt; $value)
<a name="l00778"></a>00778       {
<a name="l00779"></a>00779         $allCurrencies[$key] = $value[1];
<a name="l00780"></a>00780       }
<a name="l00781"></a>00781     }
<a name="l00782"></a>00782 
<a name="l00783"></a>00783     $this-&gt;<a class="code" href="classsfCultureInfo.html#a67fbccde6271b88200cc230e9da0efca" title="sorts the passed array according to the locale of this sfCultureInfo class">sortArray</a>($allCurrencies);
<a name="l00784"></a>00784 
<a name="l00785"></a>00785     <span class="keywordflow">return</span> $allCurrencies;
<a name="l00786"></a>00786   }
<a name="l00787"></a>00787 
<a name="l00795"></a><a class="code" href="classsfCultureInfo.html#a0178f014f6d1781297f5530111f79446">00795</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#a0178f014f6d1781297f5530111f79446" title="Gets a list of languages in the language of the localized version.">getLanguages</a>($languages = null)
<a name="l00796"></a>00796   {
<a name="l00797"></a>00797     $allLanguages = $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&#39;Languages&#39;</span>, <span class="keyword">true</span>);
<a name="l00798"></a>00798 
<a name="l00799"></a>00799     <span class="comment">// restrict languages to a sub-set</span>
<a name="l00800"></a>00800     <span class="keywordflow">if</span> (null !== $languages)
<a name="l00801"></a>00801     {
<a name="l00802"></a>00802       <span class="keywordflow">if</span> ($problems = array_diff($languages, array_keys($allLanguages)))
<a name="l00803"></a>00803       {
<a name="l00804"></a>00804         <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException(sprintf(<span class="stringliteral">&#39;The following languages do not exist: %s.&#39;</span>, implode(<span class="stringliteral">&#39;, &#39;</span>, $problems)));
<a name="l00805"></a>00805       }
<a name="l00806"></a>00806 
<a name="l00807"></a>00807       $allLanguages = array_intersect_key($allLanguages, array_flip($languages));
<a name="l00808"></a>00808     }
<a name="l00809"></a>00809 
<a name="l00810"></a>00810     $this-&gt;<a class="code" href="classsfCultureInfo.html#a67fbccde6271b88200cc230e9da0efca" title="sorts the passed array according to the locale of this sfCultureInfo class">sortArray</a>($allLanguages);
<a name="l00811"></a>00811 
<a name="l00812"></a>00812     <span class="keywordflow">return</span> $allLanguages;
<a name="l00813"></a>00813   }
<a name="l00814"></a>00814 
<a name="l00820"></a><a class="code" href="classsfCultureInfo.html#abf679d85fd1552496505e2a982c35f91">00820</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#abf679d85fd1552496505e2a982c35f91" title="Gets a list of scripts in the language of the localized version.">getScripts</a>()
<a name="l00821"></a>00821   {
<a name="l00822"></a>00822     <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&#39;Scripts&#39;</span>, <span class="keyword">true</span>);
<a name="l00823"></a>00823   }
<a name="l00824"></a>00824 
<a name="l00830"></a><a class="code" href="classsfCultureInfo.html#ac431d4c7341f2d70043e6a10316c803e">00830</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#ac431d4c7341f2d70043e6a10316c803e" title="Gets a list of timezones in the language of the localized version.">getTimeZones</a>()
<a name="l00831"></a>00831   {
<a name="l00832"></a>00832     <span class="comment">//new format since ICU 3.8</span>
<a name="l00833"></a>00833     <span class="comment">//zoneStrings contains metaTimezones</span>
<a name="l00834"></a>00834     $metadata = $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&#39;zoneStrings&#39;</span>, <span class="keyword">true</span>);
<a name="l00835"></a>00835     <span class="comment">//TimeZones contains the Timezone name =&gt; metaTimezone identifier</span>
<a name="l00836"></a>00836     $timeZones = $this-&gt;<a class="code" href="classsfCultureInfo.html#ac1294679ccbc705f45b65bae2e4c0afd" title="Finds the specific ICU data information from the data.">findInfo</a>(<span class="stringliteral">&#39;TimeZones&#39;</span>, <span class="keyword">true</span>);
<a name="l00837"></a>00837     <span class="keywordflow">foreach</span> ($timeZones as $key =&gt; $value)
<a name="l00838"></a>00838     {
<a name="l00839"></a>00839       $timeZones[$key] = $metadata[<span class="stringliteral">&#39;meta:&#39;</span>.$value];
<a name="l00840"></a>00840       $timeZones[$key][<span class="stringliteral">&#39;identifier&#39;</span>] = $key;
<a name="l00841"></a>00841       $timeZones[$key][<span class="stringliteral">&#39;city&#39;</span>] = str_replace(<span class="charliteral">&#39;_&#39;</span>, <span class="charliteral">&#39; &#39;</span>, substr($key, strpos($key, <span class="charliteral">&#39;/&#39;</span>) + 1));
<a name="l00842"></a>00842     }
<a name="l00843"></a>00843     <span class="keywordflow">return</span> $timeZones;
<a name="l00844"></a>00844   }
<a name="l00845"></a>00845 
<a name="l00851"></a><a class="code" href="classsfCultureInfo.html#a67fbccde6271b88200cc230e9da0efca">00851</a>   <span class="keyword">public</span> function <a class="code" href="classsfCultureInfo.html#a67fbccde6271b88200cc230e9da0efca" title="sorts the passed array according to the locale of this sfCultureInfo class">sortArray</a>(&amp;$array)
<a name="l00852"></a>00852   {
<a name="l00853"></a>00853     $oldLocale = setlocale(LC_COLLATE, 0);
<a name="l00854"></a>00854     setlocale(LC_COLLATE, $this-&gt;<a class="code" href="classsfCultureInfo.html#af63e6fe7df4319eb1e2b54ff5aede3d6" title="Gets the culture name in the format &amp;quot;&amp;lt;languagecode2&amp;gt;_(country/regioncode2)&amp;quot;...">getName</a>());
<a name="l00855"></a>00855     asort($array, SORT_LOCALE_STRING);
<a name="l00856"></a>00856     setlocale(LC_COLLATE, $oldLocale);
<a name="l00857"></a>00857   }
<a name="l00858"></a>00858 }
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>

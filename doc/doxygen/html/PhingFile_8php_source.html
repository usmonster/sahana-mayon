<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Sahana Agasti: lib/vendor/symfony/lib/plugins/sfPropelPlugin/lib/vendor/phing/system/io/PhingFile.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>lib/vendor/symfony/lib/plugins/sfPropelPlugin/lib/vendor/phing/system/io/PhingFile.php</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 <span class="comment">/*</span>
<a name="l00003"></a>00003 <span class="comment"> *  $Id: PhingFile.php 362 2008-03-08 10:07:53Z mrook $</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00006"></a>00006 <span class="comment"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00007"></a>00007 <span class="comment"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00008"></a>00008 <span class="comment"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<a name="l00009"></a>00009 <span class="comment"> * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<a name="l00010"></a>00010 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00011"></a>00011 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00012"></a>00012 <span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00013"></a>00013 <span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00014"></a>00014 <span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00015"></a>00015 <span class="comment"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> * This software consists of voluntary contributions made by many individuals</span>
<a name="l00018"></a>00018 <span class="comment"> * and is licensed under the LGPL. For more information please see</span>
<a name="l00019"></a>00019 <span class="comment"> * &lt;http://phing.info&gt;.</span>
<a name="l00020"></a>00020 <span class="comment"> */</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 include_once <span class="stringliteral">&#39;phing/system/io/FileSystem.php&#39;</span>;
<a name="l00023"></a>00023 include_once <span class="stringliteral">&#39;phing/system/lang/NullPointerException.php&#39;</span>;
<a name="l00024"></a>00024 
<a name="l00031"></a><a class="code" href="classPhingFile.html">00031</a> <span class="keyword">class </span><a class="code" href="classPhingFile.html">PhingFile</a> {
<a name="l00032"></a>00032 
<a name="l00034"></a><a class="code" href="classPhingFile.html#ab9df269b674c9a56c2b20cc70cd05cef">00034</a>     <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="classPhingFile.html#ab9df269b674c9a56c2b20cc70cd05cef" title="separator string, static, obtained from FileSystem">$separator</a>;
<a name="l00035"></a>00035 
<a name="l00037"></a><a class="code" href="classPhingFile.html#aef00c80ca643ec9ac7f2aeaa36a618d6">00037</a>     <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="classPhingFile.html#aef00c80ca643ec9ac7f2aeaa36a618d6" title="path separator string, static, obtained from FileSystem (; or :)">$pathSeparator</a>;
<a name="l00038"></a>00038     
<a name="l00044"></a>00044     <span class="keyword">private</span> $path = null;
<a name="l00045"></a>00045 
<a name="l00047"></a>00047     <span class="keyword">private</span> $prefixLength = 0;
<a name="l00048"></a>00048 
<a name="l00050"></a><a class="code" href="classPhingFile.html#a18c03a7f17818868ca037440e048c346">00050</a>     function <a class="code" href="classPhingFile.html#a18c03a7f17818868ca037440e048c346" title="constructor">__construct</a>($arg1 = null, $arg2 = null) {
<a name="l00051"></a>00051         
<a name="l00052"></a>00052         <span class="keywordflow">if</span> (self::$separator === null || self::$pathSeparator === null) {
<a name="l00053"></a>00053             $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00054"></a>00054             self::$separator = $fs-&gt;getSeparator();
<a name="l00055"></a>00055             self::$pathSeparator = $fs-&gt;getPathSeparator();
<a name="l00056"></a>00056         }
<a name="l00057"></a>00057 
<a name="l00058"></a>00058         <span class="comment">/* simulate signature identified constructors */</span>
<a name="l00059"></a>00059         <span class="keywordflow">if</span> ($arg1 instanceof <a class="code" href="classPhingFile.html">PhingFile</a> &amp;&amp; is_string($arg2)) {
<a name="l00060"></a>00060             $this-&gt;_constructFileParentStringChild($arg1, $arg2);
<a name="l00061"></a>00061         } elseif (is_string($arg1) &amp;&amp; ($arg2 === null)) {
<a name="l00062"></a>00062             $this-&gt;_constructPathname($arg1);
<a name="l00063"></a>00063         } elseif(is_string($arg1) &amp;&amp; is_string($arg2)) {
<a name="l00064"></a>00064             $this-&gt;_constructStringParentStringChild($arg1, $arg2);
<a name="l00065"></a>00065         } <span class="keywordflow">else</span> {
<a name="l00066"></a>00066             <span class="keywordflow">if</span> ($arg1 === null) {
<a name="l00067"></a>00067                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classNullPointerException.html">NullPointerException</a>(<span class="stringliteral">&quot;Argument1 to function must not be null&quot;</span>);
<a name="l00068"></a>00068             }
<a name="l00069"></a>00069             $this-&gt;path = (string) $arg1;
<a name="l00070"></a>00070             $this-&gt;prefixLength = (int) $arg2;
<a name="l00071"></a>00071         }
<a name="l00072"></a>00072     }
<a name="l00073"></a>00073 
<a name="l00075"></a><a class="code" href="classPhingFile.html#a67a86abfa11f3af3eec695c0e70a0613">00075</a>     function <a class="code" href="classPhingFile.html#a67a86abfa11f3af3eec695c0e70a0613" title="Returns the length of this abstract pathname&amp;#39;s prefix.">getPrefixLength</a>() {
<a name="l00076"></a>00076         <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) $this-&gt;prefixLength;
<a name="l00077"></a>00077     }
<a name="l00078"></a>00078     
<a name="l00079"></a>00079     <span class="comment">/* -- constructors not called by signature match, so we need some helpers --*/</span>
<a name="l00080"></a>00080 
<a name="l00081"></a>00081     function _constructPathname($pathname) {
<a name="l00082"></a>00082         <span class="comment">// obtain ref to the filesystem layer</span>
<a name="l00083"></a>00083         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00084"></a>00084 
<a name="l00085"></a>00085         <span class="keywordflow">if</span> ($pathname === null) {
<a name="l00086"></a>00086             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classNullPointerException.html">NullPointerException</a>(<span class="stringliteral">&quot;Argument to function must not be null&quot;</span>);
<a name="l00087"></a>00087         }
<a name="l00088"></a>00088 
<a name="l00089"></a>00089         $this-&gt;path = (string) $fs-&gt;normalize($pathname);
<a name="l00090"></a>00090         $this-&gt;prefixLength = (int) $fs-&gt;prefixLength($this-&gt;path);
<a name="l00091"></a>00091     }
<a name="l00092"></a>00092 
<a name="l00093"></a>00093     function _constructStringParentStringChild($parent, $child = null) {
<a name="l00094"></a>00094         <span class="comment">// obtain ref to the filesystem layer</span>
<a name="l00095"></a>00095         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00096"></a>00096 
<a name="l00097"></a>00097         <span class="keywordflow">if</span> ($child === null) {
<a name="l00098"></a>00098             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classNullPointerException.html">NullPointerException</a>(<span class="stringliteral">&quot;Argument to function must not be null&quot;</span>);
<a name="l00099"></a>00099         }
<a name="l00100"></a>00100         <span class="keywordflow">if</span> ($parent !== null) {
<a name="l00101"></a>00101             <span class="keywordflow">if</span> ($parent === <span class="stringliteral">&quot;&quot;</span>) {
<a name="l00102"></a>00102                 $this-&gt;path = $fs-&gt;resolve($fs-&gt;getDefaultParent(), $fs-&gt;normalize($child));
<a name="l00103"></a>00103             } <span class="keywordflow">else</span> {
<a name="l00104"></a>00104                 $this-&gt;path = $fs-&gt;resolve($fs-&gt;normalize($parent), $fs-&gt;normalize($child));
<a name="l00105"></a>00105             }
<a name="l00106"></a>00106         } <span class="keywordflow">else</span> {
<a name="l00107"></a>00107             $this-&gt;path = (string) $fs-&gt;normalize($child);
<a name="l00108"></a>00108         }
<a name="l00109"></a>00109         $this-&gt;prefixLength = (int) $fs-&gt;prefixLength($this-&gt;path);
<a name="l00110"></a>00110     }
<a name="l00111"></a>00111 
<a name="l00112"></a>00112     function _constructFileParentStringChild($parent, $child = null) {
<a name="l00113"></a>00113         <span class="comment">// obtain ref to the filesystem layer</span>
<a name="l00114"></a>00114         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00115"></a>00115 
<a name="l00116"></a>00116         <span class="keywordflow">if</span> ($child === null) {
<a name="l00117"></a>00117             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classNullPointerException.html">NullPointerException</a>(<span class="stringliteral">&quot;Argument to function must not be null&quot;</span>);
<a name="l00118"></a>00118         }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120         <span class="keywordflow">if</span> ($parent !== null) {
<a name="l00121"></a>00121             <span class="keywordflow">if</span> ($parent-&gt;path === <span class="stringliteral">&quot;&quot;</span>) {
<a name="l00122"></a>00122                 $this-&gt;path = $fs-&gt;resolve($fs-&gt;getDefaultParent(), $fs-&gt;normalize($child));
<a name="l00123"></a>00123             } <span class="keywordflow">else</span> {
<a name="l00124"></a>00124                 $this-&gt;path = $fs-&gt;resolve($parent-&gt;path, $fs-&gt;normalize($child));
<a name="l00125"></a>00125             }
<a name="l00126"></a>00126         } <span class="keywordflow">else</span> {
<a name="l00127"></a>00127             $this-&gt;path = $fs-&gt;normalize($child);
<a name="l00128"></a>00128         }
<a name="l00129"></a>00129         $this-&gt;prefixLength = $fs-&gt;prefixLength($this-&gt;path);
<a name="l00130"></a>00130     }
<a name="l00131"></a>00131 
<a name="l00132"></a>00132     <span class="comment">/* -- Path-component accessors -- */</span>
<a name="l00133"></a>00133 
<a name="l00144"></a><a class="code" href="classPhingFile.html#a2d7e4a0317d1ccd186a70011ab5178be">00144</a>     function <a class="code" href="classPhingFile.html#a2d7e4a0317d1ccd186a70011ab5178be" title="Returns the name of the file or directory denoted by this abstract pathname.">getName</a>() {
<a name="l00145"></a>00145         <span class="comment">// that&#39;s a lastIndexOf</span>
<a name="l00146"></a>00146         $index = ((($res = strrpos($this-&gt;path, self::$separator)) === <span class="keyword">false</span>) ? -1 : $res);
<a name="l00147"></a>00147         <span class="keywordflow">if</span> ($index &lt; $this-&gt;prefixLength) {
<a name="l00148"></a>00148             <span class="keywordflow">return</span> substr($this-&gt;path, $this-&gt;prefixLength);
<a name="l00149"></a>00149         }
<a name="l00150"></a>00150         <span class="keywordflow">return</span> substr($this-&gt;path, $index + 1);
<a name="l00151"></a>00151     }
<a name="l00152"></a>00152 
<a name="l00165"></a><a class="code" href="classPhingFile.html#a660a9bcc34803812b92cf3a70b72de50">00165</a>     function <a class="code" href="classPhingFile.html#a660a9bcc34803812b92cf3a70b72de50" title="Returns the pathname string of this abstract pathname&amp;#39;s parent, or null if this...">getParent</a>() {
<a name="l00166"></a>00166         <span class="comment">// that&#39;s a lastIndexOf</span>
<a name="l00167"></a>00167         $index = ((($res = strrpos($this-&gt;path, self::$separator)) === <span class="keyword">false</span>) ? -1 : $res);
<a name="l00168"></a>00168         <span class="keywordflow">if</span> ($index &lt; $this-&gt;prefixLength) {
<a name="l00169"></a>00169             <span class="keywordflow">if</span> (($this-&gt;prefixLength &gt; 0) &amp;&amp; (strlen($this-&gt;path &gt; $this-&gt;prefixLength))) {
<a name="l00170"></a>00170                 <span class="keywordflow">return</span> substr($this-&gt;path, 0, $this-&gt;prefixLength);
<a name="l00171"></a>00171             }
<a name="l00172"></a>00172             <span class="keywordflow">return</span> null;
<a name="l00173"></a>00173         }
<a name="l00174"></a>00174         <span class="keywordflow">return</span> substr($this-&gt;path, 0, $index);
<a name="l00175"></a>00175     }
<a name="l00176"></a>00176 
<a name="l00190"></a><a class="code" href="classPhingFile.html#ad0f5b3ec109ecdfd8d73896324e2e104">00190</a>     function <a class="code" href="classPhingFile.html#ad0f5b3ec109ecdfd8d73896324e2e104" title="Returns the abstract pathname of this abstract pathname&amp;#39;s parent, or null if...">getParentFile</a>() {
<a name="l00191"></a>00191         $p = $this-&gt;<a class="code" href="classPhingFile.html#a660a9bcc34803812b92cf3a70b72de50" title="Returns the pathname string of this abstract pathname&amp;#39;s parent, or null if this...">getParent</a>();
<a name="l00192"></a>00192         <span class="keywordflow">if</span> ($p === null) {
<a name="l00193"></a>00193             <span class="keywordflow">return</span> null;
<a name="l00194"></a>00194         }
<a name="l00195"></a>00195         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classPhingFile.html">PhingFile</a>((<span class="keywordtype">string</span>) $p, (<span class="keywordtype">int</span>) $this-&gt;prefixLength);
<a name="l00196"></a>00196     }
<a name="l00197"></a>00197 
<a name="l00205"></a><a class="code" href="classPhingFile.html#a859375a62cb416b6da2958673e8214cb">00205</a>     function <a class="code" href="classPhingFile.html#a859375a62cb416b6da2958673e8214cb" title="Converts this abstract pathname into a pathname string.">getPath</a>() {
<a name="l00206"></a>00206         <span class="keywordflow">return</span> (<span class="keywordtype">string</span>) $this-&gt;path;
<a name="l00207"></a>00207     }
<a name="l00208"></a>00208 
<a name="l00218"></a><a class="code" href="classPhingFile.html#ac33746a4a370559b1b47d34263bee7db">00218</a>     function <a class="code" href="classPhingFile.html#ac33746a4a370559b1b47d34263bee7db" title="Tests whether this abstract pathname is absolute.">isAbsolute</a>() {
<a name="l00219"></a>00219         <span class="keywordflow">return</span> ($this-&gt;prefixLength !== 0);
<a name="l00220"></a>00220     }
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 
<a name="l00242"></a><a class="code" href="classPhingFile.html#a0fc082cd4cd620d7a94557de890df81d">00242</a>     function <a class="code" href="classPhingFile.html#a0fc082cd4cd620d7a94557de890df81d" title="Returns the absolute pathname string of this abstract pathname.">getAbsolutePath</a>() {
<a name="l00243"></a>00243         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();        
<a name="l00244"></a>00244         <span class="keywordflow">return</span> $fs-&gt;resolveFile($this);
<a name="l00245"></a>00245     }
<a name="l00246"></a>00246 
<a name="l00254"></a><a class="code" href="classPhingFile.html#acb05c58b46c1efb68b5e4dbb8a8a4919">00254</a>     function <a class="code" href="classPhingFile.html#acb05c58b46c1efb68b5e4dbb8a8a4919" title="Returns the absolute form of this abstract pathname.">getAbsoluteFile</a>() {
<a name="l00255"></a>00255         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classPhingFile.html">PhingFile</a>((<span class="keywordtype">string</span>) $this-&gt;<a class="code" href="classPhingFile.html#a0fc082cd4cd620d7a94557de890df81d" title="Returns the absolute pathname string of this abstract pathname.">getAbsolutePath</a>());
<a name="l00256"></a>00256     }
<a name="l00257"></a>00257 
<a name="l00258"></a>00258 
<a name="l00283"></a><a class="code" href="classPhingFile.html#a3fe1be73352070861a3297f3306fbf10">00283</a>     function <a class="code" href="classPhingFile.html#a3fe1be73352070861a3297f3306fbf10" title="Returns the canonical pathname string of this abstract pathname.">getCanonicalPath</a>() {
<a name="l00284"></a>00284         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00285"></a>00285         <span class="keywordflow">return</span> $fs-&gt;canonicalize($this-&gt;path);
<a name="l00286"></a>00286     }
<a name="l00287"></a>00287 
<a name="l00288"></a>00288 
<a name="l00296"></a><a class="code" href="classPhingFile.html#a15d082355f61af11b243f10e02faf950">00296</a>     function <a class="code" href="classPhingFile.html#a15d082355f61af11b243f10e02faf950" title="Returns the canonical form of this abstract pathname.">getCanonicalFile</a>() {
<a name="l00297"></a>00297         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classPhingFile.html">PhingFile</a>($this-&gt;<a class="code" href="classPhingFile.html#a3fe1be73352070861a3297f3306fbf10" title="Returns the canonical pathname string of this abstract pathname.">getCanonicalPath</a>());
<a name="l00298"></a>00298     }
<a name="l00299"></a>00299 
<a name="l00316"></a><a class="code" href="classPhingFile.html#a935f3454d466c823e61029ca367a6d99">00316</a>     function <a class="code" href="classPhingFile.html#a935f3454d466c823e61029ca367a6d99" title="Converts this abstract pathname into a file: URL.">toURL</a>() {
<a name="l00317"></a>00317         <span class="comment">/*</span>
<a name="l00318"></a>00318 <span class="comment">        // URL class not implemented yet</span>
<a name="l00319"></a>00319 <span class="comment">        return new URL(&quot;file&quot;, &quot;&quot;, $this-&gt;_slashify($this-&gt;getAbsolutePath(), $this-&gt;isDirectory()));</span>
<a name="l00320"></a>00320 <span class="comment">        */</span>
<a name="l00321"></a>00321     }
<a name="l00322"></a>00322 
<a name="l00327"></a><a class="code" href="classPhingFile.html#a904a88f2bcff9b57bb045401e6cac607">00327</a>     function <a class="code" href="classPhingFile.html#a904a88f2bcff9b57bb045401e6cac607" title="Constructs a file: URI that represents this abstract pathname.">toURI</a>() {
<a name="l00328"></a>00328         <span class="comment">/*</span>
<a name="l00329"></a>00329 <span class="comment">        $f = $this-&gt;getAbsoluteFile();</span>
<a name="l00330"></a>00330 <span class="comment">           $sp = (string) $this-&gt;slashify($f-&gt;getPath(), $f-&gt;isDirectory());</span>
<a name="l00331"></a>00331 <span class="comment">           if (StringHelper::startsWith(&#39;//&#39;, $sp))</span>
<a name="l00332"></a>00332 <span class="comment">        $sp = &#39;//&#39; + sp;</span>
<a name="l00333"></a>00333 <span class="comment">           return new URI(&#39;file&#39;, null, $sp, null);</span>
<a name="l00334"></a>00334 <span class="comment">        */</span>
<a name="l00335"></a>00335     }
<a name="l00336"></a>00336 
<a name="l00337"></a>00337     function _slashify($path, $isDirectory) {
<a name="l00338"></a>00338         $p = (string) $path;
<a name="l00339"></a>00339 
<a name="l00340"></a>00340         <span class="keywordflow">if</span> (self::$separator !== <span class="charliteral">&#39;/&#39;</span>) {
<a name="l00341"></a>00341             $p = str_replace(self::$separator, <span class="charliteral">&#39;/&#39;</span>, $p);
<a name="l00342"></a>00342         }
<a name="l00343"></a>00343 
<a name="l00344"></a>00344         <span class="keywordflow">if</span> (!<a class="code" href="classStringHelper.html#a5378978e5b71a9284d46196959752de2" title="tests if a string starts with a given string">StringHelper::startsWith</a>(<span class="charliteral">&#39;/&#39;</span>, $p)) {
<a name="l00345"></a>00345             $p = <span class="charliteral">&#39;/&#39;</span>.$p;
<a name="l00346"></a>00346         }
<a name="l00347"></a>00347 
<a name="l00348"></a>00348         <span class="keywordflow">if</span> (!<a class="code" href="classStringHelper.html#a05d79b7b287e41be77fe7a640764532e" title="tests if a string ends with a given string">StringHelper::endsWith</a>(<span class="charliteral">&#39;/&#39;</span>, $p) &amp;&amp; $isDirectory) {
<a name="l00349"></a>00349             $p = $p.<span class="charliteral">&#39;/&#39;</span>;
<a name="l00350"></a>00350         }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352         <span class="keywordflow">return</span> $p;
<a name="l00353"></a>00353     }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355     <span class="comment">/* -- Attribute accessors -- */</span>
<a name="l00356"></a>00356 
<a name="l00365"></a><a class="code" href="classPhingFile.html#afe61866f2000a9674cc623ab73738f98">00365</a>     function <a class="code" href="classPhingFile.html#afe61866f2000a9674cc623ab73738f98" title="Tests whether the application can read the file denoted by this abstract pathname...">canRead</a>() {
<a name="l00366"></a>00366         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00367"></a>00367 
<a name="l00368"></a>00368         <span class="keywordflow">if</span> ($fs-&gt;checkAccess($this)) {
<a name="l00369"></a>00369             <span class="keywordflow">return</span> (<span class="keywordtype">boolean</span>) @is_readable($this-&gt;<a class="code" href="classPhingFile.html#a0fc082cd4cd620d7a94557de890df81d" title="Returns the absolute pathname string of this abstract pathname.">getAbsolutePath</a>());
<a name="l00370"></a>00370         }
<a name="l00371"></a>00371         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00372"></a>00372     }
<a name="l00373"></a>00373 
<a name="l00384"></a><a class="code" href="classPhingFile.html#a300a75a4b31393b745559965419183f3">00384</a>     function <a class="code" href="classPhingFile.html#a300a75a4b31393b745559965419183f3" title="Tests whether the application can modify to the file denoted by this abstract pathname...">canWrite</a>() {
<a name="l00385"></a>00385         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00386"></a>00386         <span class="keywordflow">return</span> $fs-&gt;checkAccess($this, <span class="keyword">true</span>);
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388 
<a name="l00396"></a><a class="code" href="classPhingFile.html#a03f03f57cbf788a351ce75fa5d9057d1">00396</a>     function <a class="code" href="classPhingFile.html#a03f03f57cbf788a351ce75fa5d9057d1" title="Tests whether the file denoted by this abstract pathname exists.">exists</a>() {                
<a name="l00397"></a>00397     clearstatcache();
<a name="l00398"></a>00398         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classPhingFile.html#a68495cba6bd501b1f01ebd8e60c98f9d" title="Tests whether the file denoted by this abstract pathname is a normal file.">isFile</a>()) {
<a name="l00399"></a>00399             <span class="keywordflow">return</span> @file_exists($this-&gt;path);
<a name="l00400"></a>00400         } <span class="keywordflow">else</span> {
<a name="l00401"></a>00401             <span class="keywordflow">return</span> @is_dir($this-&gt;path);
<a name="l00402"></a>00402         }
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404 
<a name="l00414"></a><a class="code" href="classPhingFile.html#a191ce6b46347969c6ebb980584a94ea1">00414</a>     function <a class="code" href="classPhingFile.html#a191ce6b46347969c6ebb980584a94ea1" title="Tests whether the file denoted by this abstract pathname is a directory.">isDirectory</a>() {
<a name="l00415"></a>00415     clearstatcache();
<a name="l00416"></a>00416         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00417"></a>00417         <span class="keywordflow">if</span> ($fs-&gt;checkAccess($this) !== <span class="keyword">true</span>) {
<a name="l00418"></a>00418             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classIOException.html">IOException</a>(<span class="stringliteral">&quot;No read access to &quot;</span>.$this-&gt;path);
<a name="l00419"></a>00419         }
<a name="l00420"></a>00420         <span class="keywordflow">return</span> @is_dir($this-&gt;path);
<a name="l00421"></a>00421     }
<a name="l00422"></a>00422 
<a name="l00433"></a><a class="code" href="classPhingFile.html#a68495cba6bd501b1f01ebd8e60c98f9d">00433</a>     function <a class="code" href="classPhingFile.html#a68495cba6bd501b1f01ebd8e60c98f9d" title="Tests whether the file denoted by this abstract pathname is a normal file.">isFile</a>() {
<a name="l00434"></a>00434     clearstatcache();
<a name="l00435"></a>00435         <span class="comment">//$fs = FileSystem::getFileSystem();</span>
<a name="l00436"></a>00436         <span class="keywordflow">return</span> @is_file($this-&gt;path);
<a name="l00437"></a>00437     }
<a name="l00438"></a>00438 
<a name="l00451"></a><a class="code" href="classPhingFile.html#a96192561363473070809ab832ed30597">00451</a>     function <a class="code" href="classPhingFile.html#a96192561363473070809ab832ed30597" title="Tests whether the file named by this abstract pathname is a hidden file.">isHidden</a>() {
<a name="l00452"></a>00452         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00453"></a>00453         <span class="keywordflow">if</span> ($fs-&gt;checkAccess($this) !== <span class="keyword">true</span>) {
<a name="l00454"></a>00454             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classIOException.html">IOException</a>(<span class="stringliteral">&quot;No read access to &quot;</span>.$this-&gt;path);
<a name="l00455"></a>00455         }
<a name="l00456"></a>00456         <span class="keywordflow">return</span> (($fs-&gt;getBooleanAttributes($this) &amp; $fs-&gt;BA_HIDDEN) !== 0);
<a name="l00457"></a>00457     }
<a name="l00458"></a>00458 
<a name="l00468"></a><a class="code" href="classPhingFile.html#a5efa70082a5e88474b774e97648e522e">00468</a>     function <a class="code" href="classPhingFile.html#a5efa70082a5e88474b774e97648e522e" title="Returns the time that the file denoted by this abstract pathname was last modified...">lastModified</a>() {
<a name="l00469"></a>00469         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00470"></a>00470         <span class="keywordflow">if</span> ($fs-&gt;checkAccess($this) !== <span class="keyword">true</span>) {
<a name="l00471"></a>00471             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classIOException.html">IOException</a>(<span class="stringliteral">&quot;No read access to &quot;</span> . $this-&gt;path);
<a name="l00472"></a>00472         }
<a name="l00473"></a>00473         <span class="keywordflow">return</span> $fs-&gt;getLastModifiedTime($this);
<a name="l00474"></a>00474     }
<a name="l00475"></a>00475 
<a name="l00483"></a><a class="code" href="classPhingFile.html#ad66cdad306f035c1b4d39ee202f6ca02">00483</a>     function <a class="code" href="classPhingFile.html#ad66cdad306f035c1b4d39ee202f6ca02" title="Returns the length of the file denoted by this abstract pathname.">length</a>() {
<a name="l00484"></a>00484         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00485"></a>00485         <span class="keywordflow">if</span> ($fs-&gt;checkAccess($this) !== <span class="keyword">true</span>) {
<a name="l00486"></a>00486             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classIOException.html">IOException</a>(<span class="stringliteral">&quot;No read access to &quot;</span>.$this-&gt;path.<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00487"></a>00487         }
<a name="l00488"></a>00488         <span class="keywordflow">return</span> $fs-&gt;getLength($this);
<a name="l00489"></a>00489     }
<a name="l00490"></a>00490 
<a name="l00497"></a><a class="code" href="classPhingFile.html#af58d8112839583a444feb3762433782b">00497</a>     function <a class="code" href="classPhingFile.html#af58d8112839583a444feb3762433782b" title="Convenience method for returning the contents of this file as a string.">contents</a>() {
<a name="l00498"></a>00498         <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classPhingFile.html#afe61866f2000a9674cc623ab73738f98" title="Tests whether the application can read the file denoted by this abstract pathname...">canRead</a>() || !$this-&gt;<a class="code" href="classPhingFile.html#a68495cba6bd501b1f01ebd8e60c98f9d" title="Tests whether the file denoted by this abstract pathname is a normal file.">isFile</a>()) {
<a name="l00499"></a>00499             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classIOException.html">IOException</a>(<span class="stringliteral">&quot;Cannot read file contents!&quot;</span>);
<a name="l00500"></a>00500         }
<a name="l00501"></a>00501         <span class="keywordflow">return</span> file_get_contents($this-&gt;<a class="code" href="classPhingFile.html#a0fc082cd4cd620d7a94557de890df81d" title="Returns the absolute pathname string of this abstract pathname.">getAbsolutePath</a>());
<a name="l00502"></a>00502     }
<a name="l00503"></a>00503     
<a name="l00504"></a>00504     <span class="comment">/* -- File operations -- */</span>
<a name="l00505"></a>00505 
<a name="l00518"></a><a class="code" href="classPhingFile.html#a360fff452f8f5023bd1635388e9e61a7">00518</a>     function <a class="code" href="classPhingFile.html#a360fff452f8f5023bd1635388e9e61a7" title="Atomically creates a new, empty file named by this abstract pathname if and only...">createNewFile</a>($parents=<span class="keyword">true</span>, $mode=0777) {
<a name="l00519"></a>00519         $file = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>()-&gt;createNewFile($this-&gt;path);
<a name="l00520"></a>00520         <span class="keywordflow">return</span> $file;
<a name="l00521"></a>00521     }
<a name="l00522"></a>00522 
<a name="l00531"></a><a class="code" href="classPhingFile.html#aad1bc0d2c01ea8c88d0c9c0f734d7f79">00531</a>     function <span class="keyword">delete</span>() {
<a name="l00532"></a>00532         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00533"></a>00533         <span class="keywordflow">if</span> ($fs-&gt;canDelete($this) !== <span class="keyword">true</span>) {
<a name="l00534"></a>00534             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classIOException.html">IOException</a>(<span class="stringliteral">&quot;Cannot delete &quot;</span> . $this-&gt;path . <span class="stringliteral">&quot;\n&quot;</span>); 
<a name="l00535"></a>00535         }
<a name="l00536"></a>00536         <span class="keywordflow">return</span> $fs-&gt;delete($this);
<a name="l00537"></a>00537     }
<a name="l00538"></a>00538 
<a name="l00549"></a><a class="code" href="classPhingFile.html#ae12ee98b212f8ffd5a1c1c3371f5dc55">00549</a>     function <a class="code" href="classPhingFile.html#ae12ee98b212f8ffd5a1c1c3371f5dc55" title="Requests that the file or directory denoted by this abstract pathname be deleted...">deleteOnExit</a>() {
<a name="l00550"></a>00550         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00551"></a>00551         $fs-&gt;deleteOnExit($this);
<a name="l00552"></a>00552     }
<a name="l00553"></a>00553 
<a name="l00576"></a><a class="code" href="classPhingFile.html#ae732a2d7a6426ac9f58fce99d5f1ee82">00576</a>     function <a class="code" href="classPhingFile.html#ae732a2d7a6426ac9f58fce99d5f1ee82" title="Returns an array of strings naming the files and directories in the directory denoted...">listDir</a>($filter = null) {
<a name="l00577"></a>00577         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00578"></a>00578         <span class="keywordflow">return</span> $fs-&gt;lister($this, $filter);
<a name="l00579"></a>00579     }
<a name="l00580"></a>00580 
<a name="l00581"></a>00581     function listFiles($filter = null) {
<a name="l00582"></a>00582         $ss = $this-&gt;<a class="code" href="classPhingFile.html#ae732a2d7a6426ac9f58fce99d5f1ee82" title="Returns an array of strings naming the files and directories in the directory denoted...">listDir</a>($filter);
<a name="l00583"></a>00583         <span class="keywordflow">if</span> ($ss === null) {
<a name="l00584"></a>00584             <span class="keywordflow">return</span> null;
<a name="l00585"></a>00585         }
<a name="l00586"></a>00586         $n = count($ss);
<a name="l00587"></a>00587         $fs = array();
<a name="l00588"></a>00588         <span class="keywordflow">for</span> ($i = 0; $i &lt; $n; $i++) {
<a name="l00589"></a>00589             $fs[$i] = <span class="keyword">new</span> <a class="code" href="classPhingFile.html">PhingFile</a>((<span class="keywordtype">string</span>)$this-&gt;path, (<span class="keywordtype">string</span>)$ss[$i]);
<a name="l00590"></a>00590         }
<a name="l00591"></a>00591         <span class="keywordflow">return</span> $fs;
<a name="l00592"></a>00592     }
<a name="l00593"></a>00593 
<a name="l00605"></a><a class="code" href="classPhingFile.html#a9087685468d825406c07c36af40858a5">00605</a>     function <a class="code" href="classPhingFile.html#a9087685468d825406c07c36af40858a5" title="Creates the directory named by this abstract pathname, including any necessary but...">mkdirs</a>() {
<a name="l00606"></a>00606         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classPhingFile.html#a03f03f57cbf788a351ce75fa5d9057d1" title="Tests whether the file denoted by this abstract pathname exists.">exists</a>()) {
<a name="l00607"></a>00607             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00608"></a>00608         }
<a name="l00609"></a>00609     <span class="keywordflow">try</span> {
<a name="l00610"></a>00610       <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classPhingFile.html#ab0149daa92df7448e22349327967eb02" title="Creates the directory named by this abstract pathname.">mkdir</a>()) {
<a name="l00611"></a>00611               <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00612"></a>00612           }
<a name="l00613"></a>00613     } <span class="keywordflow">catch</span> (<a class="code" href="classIOException.html">IOException</a> $ioe) {
<a name="l00614"></a>00614       <span class="comment">// IOException from mkdir() means that directory propbably didn&#39;t exist.</span>
<a name="l00615"></a>00615     }        
<a name="l00616"></a>00616         $parentFile = $this-&gt;<a class="code" href="classPhingFile.html#ad0f5b3ec109ecdfd8d73896324e2e104" title="Returns the abstract pathname of this abstract pathname&amp;#39;s parent, or null if...">getParentFile</a>();
<a name="l00617"></a>00617         <span class="keywordflow">return</span> (($parentFile !== null) &amp;&amp; ($parentFile-&gt;mkdirs() &amp;&amp; $this-&gt;<a class="code" href="classPhingFile.html#ab0149daa92df7448e22349327967eb02" title="Creates the directory named by this abstract pathname.">mkdir</a>()));
<a name="l00618"></a>00618     }
<a name="l00619"></a>00619 
<a name="l00626"></a><a class="code" href="classPhingFile.html#ab0149daa92df7448e22349327967eb02">00626</a>     function <a class="code" href="classPhingFile.html#ab0149daa92df7448e22349327967eb02" title="Creates the directory named by this abstract pathname.">mkdir</a>() {
<a name="l00627"></a>00627         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00628"></a>00628 
<a name="l00629"></a>00629         <span class="keywordflow">if</span> ($fs-&gt;checkAccess(<span class="keyword">new</span> <a class="code" href="classPhingFile.html">PhingFile</a>($this-&gt;path), <span class="keyword">true</span>) !== <span class="keyword">true</span>) {
<a name="l00630"></a>00630             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classIOException.html">IOException</a>(<span class="stringliteral">&quot;No write access to &quot;</span> . $this-&gt;<a class="code" href="classPhingFile.html#a859375a62cb416b6da2958673e8214cb" title="Converts this abstract pathname into a pathname string.">getPath</a>());
<a name="l00631"></a>00631         }
<a name="l00632"></a>00632         <span class="keywordflow">return</span> $fs-&gt;createDirectory($this);
<a name="l00633"></a>00633     }
<a name="l00634"></a>00634 
<a name="l00641"></a><a class="code" href="classPhingFile.html#afffd27e6dfa81dfb392d6a403a35214b">00641</a>     function <a class="code" href="classPhingFile.html#afffd27e6dfa81dfb392d6a403a35214b" title="Renames the file denoted by this abstract pathname.">renameTo</a>(<a class="code" href="classPhingFile.html">PhingFile</a> $destFile) {
<a name="l00642"></a>00642         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00643"></a>00643         <span class="keywordflow">if</span> ($fs-&gt;checkAccess($this) !== <span class="keyword">true</span>) {
<a name="l00644"></a>00644             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classIOException.html">IOException</a>(<span class="stringliteral">&quot;No write access to &quot;</span>.$this-&gt;<a class="code" href="classPhingFile.html#a859375a62cb416b6da2958673e8214cb" title="Converts this abstract pathname into a pathname string.">getPath</a>());
<a name="l00645"></a>00645         }
<a name="l00646"></a>00646         <span class="keywordflow">return</span> $fs-&gt;rename($this, $destFile);
<a name="l00647"></a>00647     }
<a name="l00648"></a>00648 
<a name="l00656"></a><a class="code" href="classPhingFile.html#aec8ffba48ab3ac7017f7db8bc2f7fde9">00656</a>     function <a class="code" href="classPhingFile.html#aec8ffba48ab3ac7017f7db8bc2f7fde9" title="Simple-copies file denoted by this abstract pathname into another PhingFile.">copyTo</a>(<a class="code" href="classPhingFile.html">PhingFile</a> $destFile) {
<a name="l00657"></a>00657         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00658"></a>00658 
<a name="l00659"></a>00659         <span class="keywordflow">if</span> ($fs-&gt;checkAccess($this) !== <span class="keyword">true</span>) {
<a name="l00660"></a>00660             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classIOException.html">IOException</a>(<span class="stringliteral">&quot;No read access to &quot;</span>.$this-&gt;<a class="code" href="classPhingFile.html#a859375a62cb416b6da2958673e8214cb" title="Converts this abstract pathname into a pathname string.">getPath</a>().<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00661"></a>00661         }
<a name="l00662"></a>00662 
<a name="l00663"></a>00663         <span class="keywordflow">if</span> ($fs-&gt;checkAccess($destFile, <span class="keyword">true</span>) !== <span class="keyword">true</span>) {
<a name="l00664"></a>00664             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classIOException.html">IOException</a>(<span class="stringliteral">&quot;File::copyTo() No write access to &quot;</span>.$destFile-&gt;<a class="code" href="classPhingFile.html#a859375a62cb416b6da2958673e8214cb" title="Converts this abstract pathname into a pathname string.">getPath</a>());
<a name="l00665"></a>00665         }
<a name="l00666"></a>00666         <span class="keywordflow">return</span> $fs-&gt;copy($this, $destFile);
<a name="l00667"></a>00667     }
<a name="l00668"></a>00668 
<a name="l00684"></a><a class="code" href="classPhingFile.html#ae687009f4f83389d86c5092cde50bd86">00684</a>     function <a class="code" href="classPhingFile.html#ae687009f4f83389d86c5092cde50bd86" title="Sets the last-modified time of the file or directory named by this abstract pathname...">setLastModified</a>($time) {
<a name="l00685"></a>00685         $time = (int) $time;
<a name="l00686"></a>00686         <span class="keywordflow">if</span> ($time &lt; 0) {
<a name="l00687"></a>00687             <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;IllegalArgumentException, Negative $time\n&quot;</span>);
<a name="l00688"></a>00688         }
<a name="l00689"></a>00689 
<a name="l00690"></a>00690         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00691"></a>00691         <span class="keywordflow">return</span> $fs-&gt;setLastModifiedTime($this, $time);
<a name="l00692"></a>00692     }
<a name="l00693"></a>00693 
<a name="l00703"></a><a class="code" href="classPhingFile.html#a24fb809dee9291bb286aa17ea181966f">00703</a>     function <a class="code" href="classPhingFile.html#a24fb809dee9291bb286aa17ea181966f" title="Marks the file or directory named by this abstract pathname so that only read operations...">setReadOnly</a>() {
<a name="l00704"></a>00704         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00705"></a>00705         <span class="keywordflow">if</span> ($fs-&gt;checkAccess($this, <span class="keyword">true</span>) !== <span class="keyword">true</span>) {
<a name="l00706"></a>00706             <span class="comment">// Error, no write access</span>
<a name="l00707"></a>00707             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classIOException.html">IOException</a>(<span class="stringliteral">&quot;No write access to &quot;</span> . $this-&gt;<a class="code" href="classPhingFile.html#a859375a62cb416b6da2958673e8214cb" title="Converts this abstract pathname into a pathname string.">getPath</a>());
<a name="l00708"></a>00708         }
<a name="l00709"></a>00709         <span class="keywordflow">return</span> $fs-&gt;setReadOnly($this);
<a name="l00710"></a>00710     }
<a name="l00711"></a>00711 
<a name="l00716"></a><a class="code" href="classPhingFile.html#a55b44cbfaa152ae969c8d5f280a3bcfb">00716</a>   <span class="keyword">public</span> function <a class="code" href="classPhingFile.html#a55b44cbfaa152ae969c8d5f280a3bcfb" title="Sets the owner of the file.">setUser</a>($user) {
<a name="l00717"></a>00717     $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00718"></a>00718     <span class="keywordflow">return</span> $fs-&gt;chown($this-&gt;<a class="code" href="classPhingFile.html#a859375a62cb416b6da2958673e8214cb" title="Converts this abstract pathname into a pathname string.">getPath</a>(), $user);
<a name="l00719"></a>00719     }
<a name="l00720"></a>00720     
<a name="l00725"></a><a class="code" href="classPhingFile.html#a1b54e51de6553506e9f02f72d0412dda">00725</a>     function <a class="code" href="classPhingFile.html#a1b54e51de6553506e9f02f72d0412dda" title="Retrieve the owner of this file.">getUser</a>() {
<a name="l00726"></a>00726         <span class="keywordflow">return</span> @fileowner($this-&gt;<a class="code" href="classPhingFile.html#a859375a62cb416b6da2958673e8214cb" title="Converts this abstract pathname into a pathname string.">getPath</a>());
<a name="l00727"></a>00727     }
<a name="l00728"></a>00728     
<a name="l00733"></a><a class="code" href="classPhingFile.html#aa759b31f4082270c85e5fbe8dabead35">00733</a>     function <a class="code" href="classPhingFile.html#aa759b31f4082270c85e5fbe8dabead35" title="Sets the mode of the file.">setMode</a>($mode) {
<a name="l00734"></a>00734         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00735"></a>00735         <span class="keywordflow">return</span> $fs-&gt;chmod($this-&gt;<a class="code" href="classPhingFile.html#a859375a62cb416b6da2958673e8214cb" title="Converts this abstract pathname into a pathname string.">getPath</a>(), $mode);
<a name="l00736"></a>00736     }
<a name="l00737"></a>00737 
<a name="l00742"></a><a class="code" href="classPhingFile.html#a4c79c6f3fb0153a7aae080fd5e3f3a03">00742</a>     function <a class="code" href="classPhingFile.html#a4c79c6f3fb0153a7aae080fd5e3f3a03" title="Retrieve the mode of this file.">getMode</a>() {
<a name="l00743"></a>00743         <span class="keywordflow">return</span> @fileperms($this-&gt;<a class="code" href="classPhingFile.html#a859375a62cb416b6da2958673e8214cb" title="Converts this abstract pathname into a pathname string.">getPath</a>());
<a name="l00744"></a>00744     }
<a name="l00745"></a>00745 
<a name="l00746"></a>00746     <span class="comment">/* -- Filesystem interface -- */</span>
<a name="l00747"></a>00747 
<a name="l00781"></a><a class="code" href="classPhingFile.html#a5a6517f7b96928eab293549923bfb539">00781</a>     function <a class="code" href="classPhingFile.html#a5a6517f7b96928eab293549923bfb539" title="List the available filesystem roots.">listRoots</a>() {
<a name="l00782"></a>00782         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00783"></a>00783         <span class="keywordflow">return</span> (array) $fs-&gt;listRoots();
<a name="l00784"></a>00784     }
<a name="l00785"></a>00785 
<a name="l00786"></a>00786     <span class="comment">/* -- Tempfile management -- */</span>
<a name="l00787"></a>00787 
<a name="l00791"></a><a class="code" href="classPhingFile.html#a9d1808b87be47f2e999478898c62b2bb">00791</a>     function <a class="code" href="classPhingFile.html#a9d1808b87be47f2e999478898c62b2bb" title="Returns the path to the temp directory.">getTempDir</a>() {
<a name="l00792"></a>00792         <span class="keywordflow">return</span> <a class="code" href="classPhing.html#a268f776beab540ebeac9f45eadfcb709" title="Returns property value for a System property.">Phing::getProperty</a>(<span class="stringliteral">&#39;php.tmpdir&#39;</span>);
<a name="l00793"></a>00793     }
<a name="l00794"></a>00794 
<a name="l00805"></a><a class="code" href="classPhingFile.html#a8af42079e73a50e6edd291e58847388d">00805</a>     function <a class="code" href="classPhingFile.html#a8af42079e73a50e6edd291e58847388d" title="Static method that creates a unique filename whose name begins with $prefix and ends...">createTempFile</a>($prefix, $suffix, <a class="code" href="classPhingFile.html">PhingFile</a> $directory) {
<a name="l00806"></a>00806         
<a name="l00807"></a>00807         <span class="comment">// quick but efficient hack to create a unique filename ;-)</span>
<a name="l00808"></a>00808         $result = null;
<a name="l00809"></a>00809         <span class="keywordflow">do</span> {
<a name="l00810"></a>00810             $result = <span class="keyword">new</span> <a class="code" href="classPhingFile.html">PhingFile</a>($directory, $prefix . substr(md5(time()), 0, 8) . $suffix);
<a name="l00811"></a>00811         } <span class="keywordflow">while</span> (file_exists($result-&gt;getPath()));
<a name="l00812"></a>00812 
<a name="l00813"></a>00813         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00814"></a>00814         $fs-&gt;createNewFile($result-&gt;getPath());
<a name="l00815"></a>00815         $fs-&gt;lock($result);
<a name="l00816"></a>00816 
<a name="l00817"></a>00817         <span class="keywordflow">return</span> $result;
<a name="l00818"></a>00818     }
<a name="l00819"></a>00819 
<a name="l00826"></a><a class="code" href="classPhingFile.html#a1192156e72605246bd0dd16ce2ee9480">00826</a>     function <a class="code" href="classPhingFile.html#a1192156e72605246bd0dd16ce2ee9480" title="If necessary, $File the lock on $File is removed and then the file is deleted.">removeTempFile</a>() {
<a name="l00827"></a>00827         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00828"></a>00828         <span class="comment">// catch IO Exception</span>
<a name="l00829"></a>00829         $fs-&gt;unlock($this);
<a name="l00830"></a>00830         $this-&gt;<span class="keyword">delete</span>();
<a name="l00831"></a>00831     }
<a name="l00832"></a>00832 
<a name="l00833"></a>00833 
<a name="l00834"></a>00834     <span class="comment">/* -- Basic infrastructure -- */</span>
<a name="l00835"></a>00835 
<a name="l00850"></a><a class="code" href="classPhingFile.html#a926d0c275e046fb5b5d229fbeed6660e">00850</a>     function <a class="code" href="classPhingFile.html#a926d0c275e046fb5b5d229fbeed6660e" title="Compares two abstract pathnames lexicographically.">compareTo</a>(<a class="code" href="classPhingFile.html">PhingFile</a> $file) {
<a name="l00851"></a>00851         $fs = <a class="code" href="classFileSystem.html#afa662c3510da7df07515b6c53bc86649" title="Static method to return the FileSystem singelton representing this platform&amp;#39;s...">FileSystem::getFileSystem</a>();
<a name="l00852"></a>00852         <span class="keywordflow">return</span> $fs-&gt;compare($this, $file);
<a name="l00853"></a>00853     }
<a name="l00854"></a>00854 
<a name="l00865"></a><a class="code" href="classPhingFile.html#ab39143f1e52f1a1718b6bee2eda79039">00865</a>     function <a class="code" href="classPhingFile.html#ab39143f1e52f1a1718b6bee2eda79039" title="Tests this abstract pathname for equality with the given object.">equals</a>($obj) {
<a name="l00866"></a>00866         <span class="keywordflow">if</span> (($obj !== null) &amp;&amp; ($obj instanceof <a class="code" href="classPhingFile.html">PhingFile</a>)) {
<a name="l00867"></a>00867             <span class="keywordflow">return</span> ($this-&gt;<a class="code" href="classPhingFile.html#a926d0c275e046fb5b5d229fbeed6660e" title="Compares two abstract pathnames lexicographically.">compareTo</a>($obj) === 0);
<a name="l00868"></a>00868         }
<a name="l00869"></a>00869         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00870"></a>00870     }
<a name="l00871"></a>00871 
<a name="l00873"></a><a class="code" href="classPhingFile.html#a9d18cfa4c3fa9ebd3c9bb2a492df23cc">00873</a>     function <a class="code" href="classPhingFile.html#a9d18cfa4c3fa9ebd3c9bb2a492df23cc" title="Backwards compatibility -- use PHP5&amp;#39;s native __tostring method.">toString</a>() {
<a name="l00874"></a>00874         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classPhingFile.html#a859375a62cb416b6da2958673e8214cb" title="Converts this abstract pathname into a pathname string.">getPath</a>();
<a name="l00875"></a>00875     }
<a name="l00876"></a>00876     
<a name="l00878"></a><a class="code" href="classPhingFile.html#a978d50d076607b33419fd85148773b0b">00878</a>     function <a class="code" href="classPhingFile.html#a978d50d076607b33419fd85148773b0b" title="PHP5&amp;#39;s native method.">__toString</a>() {
<a name="l00879"></a>00879         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classPhingFile.html#a859375a62cb416b6da2958673e8214cb" title="Converts this abstract pathname into a pathname string.">getPath</a>();
<a name="l00880"></a>00880     }
<a name="l00881"></a>00881 }
<a name="l00882"></a>00882 
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>


<h1 class="sectionedit1"><a name="installation_guide" id="installation_guide">Installation Guide</a></h1>
<div class="level1">

<p>

This guide covers in-depth installation instructions and options for Sahana Agasti on a wide-range of operating systems.
</p>

<p>
<strong>NOTE:</strong>
</p>

<p>
These install instructions are currently tailored for systems running a LAMP
stack, specifically Ubuntu, Apache, MySQL, and <acronym title="Hypertext Preprocessor">PHP</acronym> 5. The installation process
described in this document might work on other platforms, and with other web
servers or database engines, but it has not yet been thoroughly tested and is
not guaranteed. For questions or other support, please see the SUPPORT section
in the README file.
</p>

</div>
<!-- EDIT1 SECTION "Installation Guide" [1-579] -->
<h2 class="sectionedit2"><a name="before_starting" id="before_starting">Before Starting</a></h2>
<div class="level2">

<p>

Before you get started please take a moment to read over the software and system requirements for Sahana Agasti Mayon.
</p>

</div>
<!-- EDIT2 SECTION "Before Starting" [580-728] -->
<h3 class="sectionedit3"><a name="software" id="software">Software</a></h3>
<div class="level3">

<p>

The following software is required to run Sahana Agasti Mayon:

</p>
<ul>
<li class="level1"><div class="li"> Ubuntu 9.10 LTS or later (most current 10.04 LTS strongly recommended)</div>
</li>
<li class="level1"><div class="li"> Apache <acronym title="Hyper Text Transfer Protocol">HTTP</acronym> Server 2.2.14 or later (most current 2.2 preferred)</div>
</li>
<li class="level1"><div class="li"> MySQL 5.1.41 or later (most current 5.1 preferred)</div>
</li>
<li class="level1"><div class="li"> <acronym title="Hypertext Preprocessor">PHP</acronym> 5.2.12 or later (most current 5.3 strongly recommended)</div>
</li>
</ul>

</div>
<!-- EDIT3 SECTION "Software" [729-1075] -->
<h3 class="sectionedit4"><a name="hardware" id="hardware">Hardware</a></h3>
<div class="level3">

<p>

The following hardware resources are recommended to run Sahana Agasti Mayon:

</p>
<ul>
<li class="level1"><div class="li"> Intel Pentium or AMD Athlon CPU</div>
</li>
<li class="level1"><div class="li"> Minimum of 50 <acronym title="Megabyte">MB</acronym> available disk space</div>
</li>
<li class="level1"><div class="li"> Minimum 512 <acronym title="Megabyte">MB</acronym> RAM</div>
</li>
</ul>

</div>
<!-- EDIT4 SECTION "Hardware" [1076-1275] -->
<h2 class="sectionedit5"><a name="system_configuration" id="system_configuration">System Configuration</a></h2>
<div class="level2">

<p>

After Sahana Agasti has been downloaded and extracted, you will first need to
configure your system before installing and using the application. These
instructions assume you have super user permissions on the target machine.
</p>

</div>
<!-- EDIT5 SECTION "System Configuration" [1276-1536] -->
<h3 class="sectionedit6"><a name="apache" id="apache">Apache</a></h3>
<div class="level3">

<p>

To set permissions to allow the web server appropriate access to the required directories, execute the following commands from the project root:
</p>
<pre class="code">sudo chgrp -R www-data config/ cache/ log/ apps/frontend/config/ apps/backend/config/ data/sql/ data/indexes/
sudo chmod -cR g+wr config/ apps/frontend/config/ apps/backend/config/ data/sql/ data/indexes/
./symfony project:permissions</pre>

<p>
<strong>NOTE:</strong> Replace www-data with the group associated with the Apache user, e.g. httpd or apache.
</p>

<p>
Create a link to the web directory of the project from the server&#039;s web root, for example:
</p>
<pre class="code">sudo ln -s AGASTI_ROOT/web WEB_ROOT/agasti</pre>

<p>
<strong>NOTE:</strong> Replace AGASTI_ROOT with the full filesystem path to the Agasti root
directory, and replace WEB_ROOT with the path to your default Apache
configuration&#039;s document root.
</p>

<p>
If your version of Apache supports it, write a custom configuration file for the application; for example:
</p>
<pre class="code">Alias /agasti/sf AGASTI_ROOT/lib/vendor/symfony/data/web/sf
&lt;Directory &quot;/var/www/agasti&quot;&gt;
  AllowOverride All
  Allow from All
&lt;/Directory&gt;</pre>

<p>
To activate the site configuration, as well as mod_rewrite if it isn&#039;t already, you can then run the following commands:
</p>
<pre class="code">sudo mv agasti /etc/apache2/sites-available/
sudo a2ensite agasti
sudo a2enmod rewrite
sudo /etc/init.d/apache2 restart</pre>

<p>
<strong>NOTES:</strong>

</p>
<ul>
<li class="level1"><div class="li"> Again, replace AGASTI_ROOT with the full filesystem path to the Agasti root directory.</div>
</li>
<li class="level1"><div class="li"> Commands may vary slightly, depending upon your version of Apache.</div>
</li>
<li class="level1"><div class="li"> You may instead prefer to set up an Apache Virtual Host, if you know how.</div>
</li>
</ul>

</div>
<!-- EDIT6 SECTION "Apache" [1537-3149] -->
<h3 class="sectionedit7"><a name="mysql" id="mysql">MySQL</a></h3>
<div class="level3">

<p>

1. On the database server, create a schema for the project; for example:

</p>
<pre class="code">$ mysqladmin -uroot -p create AGASTI_DB</pre>
<ul>
<li class="level1"><div class="li"> NOTE: Replace AGASTI_DB with the name you chose for the schema, e.g. agasti.</div>
</li>
</ul>

<p>

2. Create a dedicated database user for the application (using root is highly
</p>
<pre class="code"> discouraged):</pre>
<pre class="code">$ mysql -uroot -p mysql &lt;&lt; EOF
GRANT ALL PRIVILEGES ON AGASTI_DB.* TO &#039;AGASTI_DB_USERNAME&#039;@&#039;DB_HOSTNAME&#039;
 IDENTIFIED BY &#039;AGASTI_DB_PASS&#039;;</pre>

<p>

<strong>NOTES:</strong>

</p>
<ul>
<li class="level1"><div class="li"> Replace AGASTI_DB with the name you chose for the schema, AGASTI_DB_USERNAME with the username you chose, and AGASTI_DB_PASS with the password you chose.</div>
</li>
<li class="level1"><div class="li"> For some versions of MySQL, you may need to FLUSH PRIVILEGES; before continuing.</div>
</li>
</ul>

<p>

3. Customize your MySQL options by adding the following either to a new .cnf
</p>
<pre class="code"> file in your /etc/mysql/conf.d/ directory or to your /etc/mysql/my.cnf file:</pre>
<pre class="code">  [mysqld]
  # sets default for charset=utf8 for client/connection
  character-set-server    = utf8
  collation-server        = utf8_general_ci</pre>
<pre class="code">  # sets global sql_mode to enforce NOT NULL and other attribute constraints
  sql-mode=STRICT_ALL_TABLES</pre>
<pre class="code">  [mysql]
  # sets default for charset=utf8 for server/database
  default-character-set   = utf8</pre>
<pre class="code">To activate the new options, restart MySQL:</pre>
<pre class="code">$ sudo restart mysql</pre>
<ul>
<li class="level1"><div class="li"> NOTE: Depending on your platform and version of MySQL, you may need to use</div>
</li>
</ul>

<p>
    this command:

</p>
<pre class="code">  $ sudo service mysql force-reload</pre>
<pre class="code">  or this command:</pre>
<pre class="code">  $ sudo /etc/init.d/mysql restart</pre>

<p>

<acronym title="Hypertext Preprocessor">PHP</acronym>
—
</p>

<p>
Set <acronym title="Hypertext Preprocessor">PHP</acronym>&#039;s memory limit to 256 <acronym title="Megabyte">MB</acronym> or greater by editing or adding the following
line in /etc/php5/apache2/php.ini:

</p>
<pre class="code">memory_limit = 256M</pre>

<p>

Optionally, you may also want to replace your current php.ini with the
recommended production settings, via this command:

</p>
<pre class="code">$ sudo cp /usr/share/doc/php5-common/examples/php.ini-production \
    /etc/php5/apache2/php.ini</pre>
<ul>
<li class="level1"><div class="li"> NOTE: You would still need to increase the memory_limit after this copy.</div>
</li>
</ul>

<p>
APPLICATION INSTALLATION

</p>

</div>
<div class="level1">

<p>

After you have configured your system, navigate to the install page for your
Agasti instance, e.g.:

</p>
<pre class="code">http://localhost/agasti/install.php</pre>

<p>

Follow the instructions on each screen, making modifications to your system in
response to any reported misconfigurations and entering appropriate information
when prompted.
</p>

<p>
After reviewing the installation configuration summary, the next step may take a
few minutes before the installer reports that is has completed and you can click
the “Finish” button.
</p>

<p>
At this point you will need to set the login credentials for the superuser by
editing the AGASTI_ROOT/config/config.yml file and replacing the null super_user
and super_pass values with something valid and secure, e.g.:

</p>
<pre class="code">super_user: &#039;somesecureusername&#039;
super_pass: &#039;$ome.$ecure.pa$$w0rd!&#039;</pre>

<p>

You should now be able sign in with those credentials and use the application.
</p>

<p>

ERRORS AND TROUBLESHOOTING

</p>

</div>
<div class="level1">

<p>

- Blank page after clicking “Install”, or “500” error page:

</p>
<pre class="code">The file permissions or database permissions are possibly misconfigured.
Ensure the web server has proper access to the appropriate files and
directories and check your web server error log. Also, ensure the proper
version of PHP is installed; please see the SYSTEM REQUIREMENTS section.</pre>

<p>

- 404 error page:

</p>
<pre class="code">Verify that symbolic links are being followed and that your web server is
pointing to the expected directory for the application.</pre>

<p>

- Installation instructions are followed properly and all settings configured
</p>
<pre class="code">correctly, but still unable to log into the application with proper
credentials:</pre>
<pre class="code">Clear the Symfony cache with this command, executed from your AGASTI_ROOT:</pre>
<pre class="code">$ ./symfony cc</pre>
<pre class="code">and try again.</pre>

<p>

- I have another error, or my issue still isn&#039;t resolved:

</p>
<pre class="code">Please see the SUPPORT section in the README file for information on how to
contact the developer community.</pre>

<p>
Thank you for using Sahana Agasti!
</p>
<pre class="code">                                   The Sahana Software Foundation
                                   http://www.sahanafoundation.org/</pre>

</div>
<!-- EDIT7 SECTION "MySQL" [3150-] -->